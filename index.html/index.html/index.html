

<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBusinessNow - Gest√£o Empresarial Inteligente</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Responsividade e Anima√ß√µes */
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .transition-all {
            transition: all 0.3s ease;
        }
        .alert-danger {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            border-left: 4px solid #ef4444;
        }
        .alert-warning {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
        }
        .status-trabalhando {
            background-color: #dcfce7;
            color: #166534;
        }
        .status-folga {
            background-color: #fef3c7;
            color: #92400e;
        }
        .login-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        /* Mobile First - Interface completamente otimizada */
        @media (max-width: 768px) {
            /* Reset e base mobile */
            * {
                -webkit-tap-highlight-color: transparent;
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                user-select: none;
            }
            
            body {
                font-size: 14px;
                line-height: 1.5;
                overflow-x: hidden;
            }
            
            /* Navega√ß√£o mobile fixa no topo */
            .mobile-top-nav {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 50;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                box-shadow: 0 4px 16px rgba(0,0,0,0.15);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }
            
            /* Header da navega√ß√£o mobile */
            .mobile-nav-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0.75rem 1rem;
                color: white;
                border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            
            .mobile-nav-header h1 {
                font-size: 1rem;
                font-weight: 700;
                margin: 0;
            }
            
            /* Menu de navega√ß√£o horizontal */
            .mobile-nav-menu {
                display: flex;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding: 0.5rem 0.5rem 0.75rem 0.5rem;
                gap: 0.5rem;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            .mobile-nav-menu::-webkit-scrollbar {
                display: none;
            }
            
            /* Bot√µes de navega√ß√£o mobile */
            .mobile-nav-btn {
                flex-shrink: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 0.5rem 0.75rem;
                border-radius: 12px;
                background: rgba(255,255,255,0.1);
                color: rgba(255,255,255,0.8);
                text-decoration: none;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                min-width: 70px;
                border: 1px solid rgba(255,255,255,0.1);
                backdrop-filter: blur(5px);
                -webkit-backdrop-filter: blur(5px);
            }
            
            .mobile-nav-btn.active {
                background: rgba(255,255,255,0.25);
                color: white;
                border-color: rgba(255,255,255,0.3);
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                transform: translateY(-1px);
            }
            
            .mobile-nav-btn:active {
                transform: scale(0.95);
            }
            
            .mobile-nav-btn .nav-icon {
                font-size: 1.25rem;
                margin-bottom: 0.25rem;
            }
            
            .mobile-nav-btn .nav-text {
                font-size: 0.7rem;
                font-weight: 600;
                text-align: center;
                line-height: 1;
            }
            
            /* Conte√∫do principal mobile com espa√ßo para navega√ß√£o fixa */
            .main-content-mobile {
                width: 100%;
                padding: 1rem;
                padding-top: 1rem;
                padding-bottom: 4rem;
                margin-top: 120px; /* Espa√ßo para navega√ß√£o fixa */
                min-height: calc(100vh - 120px);
                background: #f8fafc;
            }
            
            /* Esconder sidebar tradicional no mobile */
            .sidebar-mobile {
                display: none !important;
            }
            
            /* Esconder overlay no mobile */
            .mobile-overlay {
                display: none !important;
            }
            
            /* Grids responsivos premium */
            .grid-mobile {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
            }
            .grid-mobile-2 {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.75rem !important;
            }
            .grid-mobile-3 {
                display: grid !important;
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 0.5rem !important;
            }
            
            /* Sistema de tipografia mobile */
            .text-mobile {
                font-size: 0.9rem !important;
                line-height: 1.5 !important;
                color: #374151 !important;
            }
            .text-mobile-sm {
                font-size: 0.8rem !important;
                color: #6b7280 !important;
            }
            .text-mobile-lg {
                font-size: 1.1rem !important;
                font-weight: 600 !important;
                color: #1f2937 !important;
            }
            .text-mobile-xl {
                font-size: 1.25rem !important;
                font-weight: 700 !important;
                color: #111827 !important;
            }
            
            /* Sistema de espa√ßamento mobile */
            .p-mobile {
                padding: 1rem !important;
            }
            .p-mobile-sm {
                padding: 0.75rem !important;
            }
            .p-mobile-lg {
                padding: 1.25rem !important;
            }
            .p-mobile-xl {
                padding: 1.5rem !important;
            }
            .m-mobile {
                margin: 0.75rem !important;
            }
            .m-mobile-sm {
                margin: 0.5rem !important;
            }
            
            /* Modais mobile otimizados */
            .modal-mobile {
                margin: 0.5rem !important;
                max-height: 95vh !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                border-radius: 12px !important;
            }
            
            /* Tabelas mobile */
            .table-mobile {
                font-size: 0.75rem;
                display: block;
                overflow-x: auto;
                white-space: nowrap;
                -webkit-overflow-scrolling: touch;
            }
            .table-mobile th,
            .table-mobile td {
                padding: 0.5rem 0.25rem;
                min-width: 80px;
            }
            .table-mobile th {
                background: #f8fafc;
                font-weight: 600;
                position: sticky;
                top: 0;
            }
            
            /* Sistema de bot√µes mobile premium */
            .btn-mobile {
                padding: 1rem 1.25rem !important;
                font-size: 0.9rem !important;
                min-height: 48px !important;
                border-radius: 12px !important;
                font-weight: 600 !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
                border: none !important;
                cursor: pointer !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 0.5rem !important;
            }
            .btn-mobile:active {
                transform: scale(0.98) !important;
                box-shadow: 0 1px 4px rgba(0,0,0,0.1) !important;
            }
            .btn-mobile-sm {
                padding: 0.75rem 1rem !important;
                font-size: 0.8rem !important;
                min-height: 40px !important;
                border-radius: 8px !important;
            }
            .btn-mobile-lg {
                padding: 1.25rem 2rem !important;
                font-size: 1rem !important;
                min-height: 56px !important;
                border-radius: 16px !important;
                font-weight: 700 !important;
            }
            
            /* Sistema de cards mobile premium */
            .card-mobile {
                background: white !important;
                padding: 1.25rem !important;
                margin-bottom: 1rem !important;
                border-radius: 16px !important;
                box-shadow: 0 4px 16px rgba(0,0,0,0.08) !important;
                border: 1px solid #f1f5f9 !important;
                transition: all 0.3s ease !important;
            }
            .card-mobile:active {
                transform: translateY(1px) !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
            }
            .card-mobile-sm {
                padding: 1rem !important;
                margin-bottom: 0.75rem !important;
                border-radius: 12px !important;
            }
            .card-mobile-lg {
                padding: 1.5rem !important;
                margin-bottom: 1.25rem !important;
                border-radius: 20px !important;
            }
            
            /* Sistema de inputs mobile premium */
            .input-mobile {
                width: 100% !important;
                min-height: 52px !important;
                font-size: 16px !important; /* Previne zoom no iOS */
                padding: 1rem 1.25rem !important;
                border-radius: 12px !important;
                border: 2px solid #e2e8f0 !important;
                background: white !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                box-shadow: 0 1px 3px rgba(0,0,0,0.05) !important;
            }
            .input-mobile:focus {
                border-color: #3b82f6 !important;
                outline: none !important;
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1), 0 2px 8px rgba(0,0,0,0.1) !important;
                transform: translateY(-1px) !important;
            }
            .input-mobile::placeholder {
                color: #9ca3af !important;
                font-weight: 400 !important;
            }
            
            /* Sistema de select mobile premium */
            .select-mobile {
                width: 100% !important;
                min-height: 52px !important;
                font-size: 16px !important;
                padding: 1rem 1.25rem !important;
                border-radius: 12px !important;
                border: 2px solid #e2e8f0 !important;
                background: white !important;
                appearance: none !important;
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m6 8 4 4 4-4'/%3e%3c/svg%3e") !important;
                background-position: right 1rem center !important;
                background-repeat: no-repeat !important;
                background-size: 1.25em 1.25em !important;
                padding-right: 3rem !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                box-shadow: 0 1px 3px rgba(0,0,0,0.05) !important;
            }
            .select-mobile:focus {
                border-color: #3b82f6 !important;
                outline: none !important;
                box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1), 0 2px 8px rgba(0,0,0,0.1) !important;
                transform: translateY(-1px) !important;
            }
            
            /* Alertas mobile */
            .alert-mobile {
                padding: 0.75rem !important;
                border-radius: 8px !important;
                margin-bottom: 0.75rem !important;
                font-size: 0.875rem !important;
            }
            
            /* Dashboard cards mobile premium */
            .dashboard-card-mobile {
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
                padding: 1.5rem !important;
                border-radius: 20px !important;
                box-shadow: 0 8px 24px rgba(0,0,0,0.08) !important;
                margin-bottom: 1rem !important;
                border: 1px solid #e2e8f0 !important;
                position: relative !important;
                overflow: hidden !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            }
            .dashboard-card-mobile::before {
                content: '' !important;
                position: absolute !important;
                top: 0 !important;
                left: 0 !important;
                width: 4px !important;
                height: 100% !important;
                background: linear-gradient(180deg, #3b82f6 0%, #1d4ed8 100%) !important;
            }
            .dashboard-card-mobile:active {
                transform: translateY(2px) !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
            }
            
            /* Navega√ß√£o mobile premium */
            .nav-mobile {
                padding: 1rem 1.25rem !important;
                margin-bottom: 0.5rem !important;
                border-radius: 12px !important;
                font-size: 0.9rem !important;
                font-weight: 600 !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                display: flex !important;
                align-items: center !important;
                gap: 0.75rem !important;
                min-height: 48px !important;
            }
            .nav-mobile:active {
                transform: scale(0.98) !important;
                background-color: #f1f5f9 !important;
            }
            
            /* Formul√°rios mobile premium */
            .form-mobile {
                padding: 1.5rem !important;
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
                border-radius: 20px !important;
                box-shadow: 0 8px 24px rgba(0,0,0,0.08) !important;
                margin-bottom: 1.25rem !important;
                border: 1px solid #e2e8f0 !important;
            }
            .form-mobile .form-group {
                margin-bottom: 1.25rem !important;
            }
            .form-mobile .form-group:last-child {
                margin-bottom: 0 !important;
            }
            .form-mobile label {
                display: block !important;
                font-size: 0.9rem !important;
                font-weight: 600 !important;
                color: #374151 !important;
                margin-bottom: 0.75rem !important;
                letter-spacing: 0.025em !important;
            }
            
            /* Estat√≠sticas mobile */
            .stats-mobile {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
                margin-bottom: 1rem;
            }
            .stat-card-mobile {
                background: white;
                padding: 0.75rem;
                border-radius: 8px;
                text-align: center;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            .stat-value-mobile {
                font-size: 1.25rem;
                font-weight: 700;
                margin-bottom: 0.25rem;
            }
            .stat-label-mobile {
                font-size: 0.75rem;
                color: #6b7280;
            }
            
            /* Listas mobile premium */
            .list-mobile {
                background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
                border-radius: 16px !important;
                overflow: hidden !important;
                box-shadow: 0 6px 20px rgba(0,0,0,0.08) !important;
                margin-bottom: 1.25rem !important;
                border: 1px solid #e2e8f0 !important;
            }
            .list-item-mobile {
                padding: 1.25rem !important;
                border-bottom: 1px solid #f1f5f9 !important;
                display: flex !important;
                justify-content: space-between !important;
                align-items: center !important;
                transition: background-color 0.2s ease !important;
            }
            .list-item-mobile:last-child {
                border-bottom: none !important;
            }
            .list-item-mobile:active {
                background-color: #f8fafc !important;
            }
            
            /* Tabs mobile premium */
            .tabs-mobile {
                display: flex !important;
                background: #f1f5f9 !important;
                border-radius: 12px !important;
                padding: 0.5rem !important;
                margin-bottom: 1.25rem !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                box-shadow: inset 0 2px 4px rgba(0,0,0,0.05) !important;
            }
            .tab-mobile {
                flex: 1 !important;
                padding: 0.75rem 1rem !important;
                text-align: center !important;
                border-radius: 8px !important;
                font-size: 0.8rem !important;
                font-weight: 600 !important;
                white-space: nowrap !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                color: #6b7280 !important;
            }
            .tab-mobile.active {
                background: white !important;
                color: #3b82f6 !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
                transform: translateY(-1px) !important;
            }
            
            /* Floating Action Button premium */
            .fab-mobile {
                position: fixed !important;
                bottom: 1.5rem !important;
                right: 1.5rem !important;
                width: 64px !important;
                height: 64px !important;
                border-radius: 50% !important;
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;
                color: white !important;
                border: none !important;
                box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4) !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 1.75rem !important;
                z-index: 30 !important;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                cursor: pointer !important;
            }
            .fab-mobile:active {
                transform: scale(0.9) !important;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
            }
            .fab-mobile:hover {
                transform: translateY(-2px) !important;
                box-shadow: 0 12px 32px rgba(59, 130, 246, 0.5) !important;
            }
            
            /* Swipe indicators */
            .swipe-indicator {
                text-align: center;
                padding: 0.5rem;
                color: #9ca3af;
                font-size: 0.75rem;
            }
            
            /* Pull to refresh */
            .pull-refresh {
                padding: 1rem;
                text-align: center;
                color: #6b7280;
                font-size: 0.875rem;
            }
            
            /* Loading states mobile */
            .loading-mobile {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
                color: #6b7280;
            }
            .loading-spinner {
                width: 20px;
                height: 20px;
                border: 2px solid #e5e7eb;
                border-top: 2px solid #3b82f6;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-right: 0.5rem;
            }
            
            /* Anima√ß√µes mobile premium */
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            @keyframes slideInUp {
                from {
                    transform: translateY(100%);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            
            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }
            
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes bounce {
                0%, 20%, 53%, 80%, 100% {
                    transform: translate3d(0,0,0);
                }
                40%, 43% {
                    transform: translate3d(0, -8px, 0);
                }
                70% {
                    transform: translate3d(0, -4px, 0);
                }
                90% {
                    transform: translate3d(0, -2px, 0);
                }
            }
            
            .slide-in-up {
                animation: slideInUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .slide-in-right {
                animation: slideInRight 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            .bounce-in {
                animation: bounce 0.6s ease-out;
            }
            
            /* Scroll suave */
            .smooth-scroll {
                scroll-behavior: smooth;
                -webkit-overflow-scrolling: touch;
            }
            
            /* Otimiza√ß√µes de performance */
            .gpu-accelerated {
                transform: translateZ(0);
                -webkit-transform: translateZ(0);
                will-change: transform;
            }
            
            /* Corre√ß√µes espec√≠ficas iOS */
            .ios-fix {
                -webkit-appearance: none;
                -webkit-border-radius: 0;
            }
            
            /* Corre√ß√µes espec√≠ficas Android */
            .android-fix {
                -webkit-tap-highlight-color: transparent;
            }
        }
        
        /* Tablet - Otimiza√ß√µes para tablet */
        @media (min-width: 769px) and (max-width: 1024px) {
            .sidebar-tablet {
                width: 240px;
            }
            .main-content-tablet {
                padding: 1.5rem;
            }
            .grid-tablet {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        /* Desktop - Otimiza√ß√µes para desktop */
        @media (min-width: 1025px) {
            .sidebar-desktop {
                width: 288px;
            }
            .main-content-desktop {
                padding: 2rem;
            }
        }
        
        /* Corre√ß√µes de overflow e scroll */
        .overflow-fix {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Bot√µes touch-friendly */
        .touch-target {
            min-height: 44px;
            min-width: 44px;
        }
        
        /* Inputs responsivos */
        .input-responsive {
            width: 100%;
            min-height: 44px;
            font-size: 16px; /* Previne zoom no iOS */
        }
        
        /* Modais responsivos */
        .modal-responsive {
            max-width: 95vw;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* Canvas responsivo para gr√°ficos */
        .chart-responsive {
            max-width: 100%;
            height: auto;
        }
        
        /* Corre√ß√£o para elementos que podem quebrar layout */
        * {
            box-sizing: border-box;
        }
        
        /* Preven√ß√£o de zoom horizontal */
        html, body {
            overflow-x: hidden;
            width: 100%;
        }
        
        /* Melhor legibilidade em telas pequenas */
        @media (max-width: 480px) {
            .text-xs { font-size: 0.75rem; }
            .text-sm { font-size: 0.875rem; }
            .text-base { font-size: 1rem; }
            .text-lg { font-size: 1.125rem; }
            .text-xl { font-size: 1.25rem; }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-800">
    <!-- Login Screen -->
    <div id="login-screen" class="min-h-screen login-bg flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-blue-600 mb-2">MyBusinessNow</h1>
                <p class="text-gray-600">Gest√£o Empresarial Inteligente</p>
                <p class="text-sm text-gray-500 mt-2">Fa√ßa login para acessar seu dashboard</p>
            </div>

            <form id="login-form" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="login-email" class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="seu@email.com" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                    <div class="relative">
                        <input type="password" id="login-password" class="w-full p-3 pr-12 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        <button type="button" onclick="togglePasswordVisibility('login-password', 'login-eye')" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none">
                            <span id="login-eye" class="text-xl">üëÅÔ∏è</span>
                        </button>
                    </div>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-md hover:bg-blue-700 transition font-medium">
                    Entrar
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-gray-600">N√£o tem uma conta? 
                    <button onclick="showRegister()" class="text-blue-600 hover:text-blue-700 font-medium">Cadastre-se</button>
                </p>
            </div>


        </div>
    </div>

    <!-- Register Screen -->
    <div id="register-screen" class="min-h-screen login-bg flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-lg">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-blue-600 mb-2">MyBusinessNow</h1>
                <h2 class="text-xl font-semibold text-gray-800 mb-2">Cadastro</h2>
                <p class="text-gray-600">Crie sua conta e comece a gerenciar seu neg√≥cio</p>
            </div>

            <form id="register-form" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
                        <input type="text" id="reg-name" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="reg-email" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" required>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                        <div class="relative">
                            <input type="password" id="reg-password" class="w-full p-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" required>
                            <button type="button" onclick="togglePasswordVisibility('reg-password', 'reg-eye')" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none">
                                <span id="reg-eye" class="text-lg">üëÅÔ∏è</span>
                            </button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Confirmar Senha</label>
                        <div class="relative">
                            <input type="password" id="reg-confirm-password" class="w-full p-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" required>
                            <button type="button" onclick="togglePasswordVisibility('reg-confirm-password', 'reg-confirm-eye')" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none">
                                <span id="reg-confirm-eye" class="text-lg">üëÅÔ∏è</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nome da Empresa</label>
                    <input type="text" id="reg-company" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Setor</label>
                        <select id="reg-sector" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Selecione</option>
                            <option value="varejo">Varejo</option>
                            <option value="servicos">Servi√ßos</option>
                            <option value="alimentacao">Alimenta√ß√£o</option>
                            <option value="tecnologia">Tecnologia</option>
                            <option value="outros">Outros</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Funcion√°rios</label>
                        <input type="number" id="reg-employees" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" min="1" required>
                    </div>
                </div>
                <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-md hover:bg-green-700 transition font-medium">
                    Criar Conta
                </button>
            </form>

            <div class="mt-6 text-center">
                <p class="text-gray-600">J√° tem uma conta? 
                    <button onclick="showLogin()" class="text-blue-600 hover:text-blue-700 font-medium">Fa√ßa login</button>
                </p>
            </div>
        </div>
    </div>

    <!-- Trial Expired Screen -->
    <div id="trial-expired-screen" class="min-h-screen bg-gradient-to-br from-red-600 to-orange-600 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-4xl">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">‚è∞</div>
                <h1 class="text-4xl font-bold text-red-600 mb-4">Teste Gratuito Expirado!</h1>
                <p class="text-xl text-gray-600 mb-2">Seus 7 dias de teste gratuito chegaram ao fim</p>
                <p class="text-gray-500">Assine um plano para continuar usando o MyBusinessNow</p>
            </div>

            <div class="bg-blue-50 p-6 rounded-lg border border-blue-200 mb-8">
                <div class="text-center">
                    <h3 class="text-xl font-bold text-blue-800 mb-3">üéâ Boa Not√≠cia!</h3>
                    <p class="text-blue-700 mb-4">
                        <strong>Todos os seus dados est√£o seguros!</strong><br>
                        Vendas, funcion√°rios, despesas e estoque - tudo ser√° preservado quando voc√™ assinar um plano.
                    </p>
                    <div class="bg-white p-4 rounded border border-blue-300">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                            <div>
                                <div class="font-bold text-green-600" id="trial-vendas-count">0</div>
                                <div class="text-gray-600">Vendas</div>
                            </div>
                            <div>
                                <div class="font-bold text-purple-600" id="trial-funcionarios-count">0</div>
                                <div class="text-gray-600">Funcion√°rios</div>
                            </div>
                            <div>
                                <div class="font-bold text-red-600" id="trial-despesas-count">0</div>
                                <div class="text-gray-600">Despesas</div>
                            </div>
                            <div>
                                <div class="font-bold text-blue-600" id="trial-estoque-count">0</div>
                                <div class="text-gray-600">Estoque</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Escolha seu plano e continue de onde parou!</h2>
                <p class="text-gray-600">Assinatura mensal ‚Ä¢ Cancele quando quiser ‚Ä¢ Dados preservados</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Plano Start -->
                <div class="bg-white rounded-lg shadow-lg border-2 border-blue-200 relative transform hover:scale-105 transition-transform">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-medium">RECOMENDADO</span>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-4">
                            <div class="text-3xl mb-2">üöÄ</div>
                            <h4 class="text-xl font-bold text-gray-800 mb-2">Start</h4>
                            <div class="text-3xl font-bold text-blue-600 mb-1">R$ 29,90</div>
                            <div class="text-sm text-gray-500">por m√™s</div>
                        </div>
                        
                        <ul class="space-y-2 mb-6 text-sm">
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Dashboard completo</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Controle de vendas</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Gest√£o de equipe</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Controle financeiro</span>
                            </li>
                        </ul>

                        <button onclick="subscribeFromTrial('start')" class="w-full bg-blue-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition">
                            Assinar Start
                        </button>
                    </div>
                </div>

                <!-- Plano Premium -->
                <div class="bg-white rounded-lg shadow-lg border-2 border-purple-200 relative transform hover:scale-105 transition-transform">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium">MAIS POPULAR</span>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-4">
                            <div class="text-3xl mb-2">üíé</div>
                            <h4 class="text-xl font-bold text-gray-800 mb-2">Premium</h4>
                            <div class="text-3xl font-bold text-purple-600 mb-1">R$ 57,90</div>
                            <div class="text-sm text-gray-500">por m√™s</div>
                        </div>
                        
                        <ul class="space-y-2 mb-6 text-sm">
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Tudo do Start +</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Gr√°ficos de desempenho</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Relat√≥rios detalhados</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>An√°lise avan√ßada</span>
                            </li>
                        </ul>

                        <button onclick="subscribeFromTrial('premium')" class="w-full bg-purple-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-purple-700 transition">
                            Assinar Premium
                        </button>
                    </div>
                </div>

                <!-- Plano Gold -->
                <div class="bg-white rounded-lg shadow-lg border-2 border-yellow-200 relative transform hover:scale-105 transition-transform">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-yellow-600 text-white px-4 py-1 rounded-full text-sm font-medium">EMPRESARIAL</span>
                    </div>
                    <div class="p-6">
                        <div class="text-center mb-4">
                            <div class="text-3xl mb-2">üëë</div>
                            <h4 class="text-xl font-bold text-gray-800 mb-2">Gold</h4>
                            <div class="text-3xl font-bold text-yellow-600 mb-1">R$ 117,90</div>
                            <div class="text-sm text-gray-500">por m√™s</div>
                        </div>
                        
                        <ul class="space-y-2 mb-6 text-sm">
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Tudo do Premium +</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Suporte via WhatsApp</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Consultoria de neg√≥cios</span>
                            </li>
                            <li class="flex items-center gap-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Atendimento VIP</span>
                            </li>
                        </ul>

                        <button onclick="subscribeFromTrial('gold')" class="w-full bg-yellow-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-yellow-700 transition">
                            Assinar Gold
                        </button>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <p class="text-gray-500 text-sm mb-4">
                    ‚úÖ Todos os seus dados ser√£o preservados<br>
                    ‚úÖ Acesso imediato ap√≥s assinatura<br>
                    ‚úÖ Cancele a qualquer momento
                </p>
            </div>
        </div>
    </div>

    <!-- Plan Selection Screen -->
    <div id="plan-selection-screen" class="min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center p-4 hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-6xl">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-800 mb-4">üéâ Bem-vindo ao MyBusinessNow!</h1>
                <p class="text-xl text-gray-600 mb-2">Escolha o plano ideal para o seu neg√≥cio</p>
                <p class="text-gray-500">Selecione um plano para come√ßar a usar todas as funcionalidades</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
                <!-- Plano Start -->
                <div class="bg-white rounded-lg shadow-lg border-2 border-blue-200 relative transform hover:scale-105 transition-transform">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-blue-600 text-white px-4 py-1 rounded-full text-sm font-medium">RECOMENDADO</span>
                    </div>
                    <div class="p-8">
                        <div class="text-center mb-6">
                            <div class="text-4xl mb-4">üöÄ</div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-2">Start</h4>
                            <div class="text-4xl font-bold text-blue-600 mb-2">R$ 29,90</div>
                            <div class="text-sm text-gray-500">por m√™s</div>
                        </div>
                        
                        <div class="mb-6">
                            <div class="bg-blue-50 p-4 rounded-lg text-center">
                                <div class="text-sm text-blue-600 font-medium">Ideal para neg√≥cios com</div>
                                <div class="text-lg font-bold text-blue-800">at√© R$ 15.000/m√™s</div>
                            </div>
                        </div>

                        <ul class="space-y-3 mb-8">
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Dashboard completo</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Controle de vendas</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Gest√£o de equipe</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Controle financeiro</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Alertas inteligentes</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Suporte por email</span>
                            </li>
                        </ul>

                        <button onclick="selectPlan('start')" class="w-full bg-blue-600 text-white py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition">
                            Escolher Start
                        </button>
                    </div>
                </div>

                <!-- Plano Premium -->
                <div class="bg-white rounded-lg shadow-lg border-2 border-purple-200 relative transform hover:scale-105 transition-transform">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium">MAIS POPULAR</span>
                    </div>
                    <div class="p-8">
                        <div class="text-center mb-6">
                            <div class="text-4xl mb-4">üíé</div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-2">Premium</h4>
                            <div class="text-4xl font-bold text-purple-600 mb-2">R$ 57,90</div>
                            <div class="text-sm text-gray-500">por m√™s</div>
                        </div>
                        
                        <div class="mb-6">
                            <div class="bg-purple-50 p-4 rounded-lg text-center">
                                <div class="text-sm text-purple-600 font-medium">Ideal para neg√≥cios com</div>
                                <div class="text-lg font-bold text-purple-800">at√© R$ 25.000/m√™s</div>
                            </div>
                        </div>

                        <ul class="space-y-3 mb-8">
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Tudo do Start +</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Controle de estoque avan√ßado</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Relat√≥rios detalhados</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Integra√ß√£o banc√°ria</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Backup autom√°tico</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Suporte priorit√°rio</span>
                            </li>
                        </ul>

                        <button onclick="selectPlan('premium')" class="w-full bg-purple-600 text-white py-4 rounded-lg text-lg font-semibold hover:bg-purple-700 transition">
                            Escolher Premium
                        </button>
                    </div>
                </div>

                <!-- Plano Gold -->
                <div class="bg-white rounded-lg shadow-lg border-2 border-yellow-200 relative transform hover:scale-105 transition-transform">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                        <span class="bg-yellow-600 text-white px-4 py-1 rounded-full text-sm font-medium">EMPRESARIAL</span>
                    </div>
                    <div class="p-8">
                        <div class="text-center mb-6">
                            <div class="text-4xl mb-4">üëë</div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-2">Gold</h4>
                            <div class="text-4xl font-bold text-yellow-600 mb-2">R$ 117,90</div>
                            <div class="text-sm text-gray-500">por m√™s</div>
                        </div>
                        
                        <div class="mb-6">
                            <div class="bg-yellow-50 p-4 rounded-lg text-center">
                                <div class="text-sm text-yellow-600 font-medium">Ideal para neg√≥cios com</div>
                                <div class="text-lg font-bold text-yellow-800">at√© R$ 50.000/m√™s</div>
                            </div>
                        </div>

                        <ul class="space-y-3 mb-8">
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Tudo do Premium +</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Multi-lojas</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">API completa</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Relat√≥rios personalizados</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Gerente de conta dedicado</span>
                            </li>
                            <li class="flex items-center gap-3">
                                <span class="text-green-500 text-xl">‚úì</span>
                                <span class="text-sm">Suporte 24/7</span>
                            </li>
                        </ul>

                        <button onclick="selectPlan('gold')" class="w-full bg-yellow-600 text-white py-4 rounded-lg text-lg font-semibold hover:bg-yellow-700 transition">
                            Escolher Gold
                        </button>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <p class="text-gray-500 text-sm mb-4">
                    ‚úÖ Todos os planos incluem 7 dias gr√°tis para testar<br>
                    ‚úÖ Cancele a qualquer momento<br>
                    ‚úÖ Suporte especializado inclu√≠do
                </p>
                <p class="text-xs text-gray-400">
                    Ao escolher um plano, voc√™ concorda com nossos Termos de Uso e Pol√≠tica de Privacidade
                </p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="flex min-h-screen hidden">
        <!-- Navega√ß√£o Mobile Fixa no Topo (visible only on mobile) -->
        <div class="mobile-top-nav md:hidden">
            <!-- Header da navega√ß√£o -->
            <div class="mobile-nav-header">
                <div>
                    <h1 id="mobile-company-name">MyBusinessNow</h1>
                    <div class="text-xs opacity-75" id="mobile-user-info">Gest√£o Empresarial</div>
                </div>
                <button onclick="logout()" class="px-3 py-1 text-xs bg-red-500 text-white rounded-md hover:bg-red-600 transition">
                    Sair
                </button>
            </div>
            
            <!-- Menu de navega√ß√£o horizontal -->
            <div class="mobile-nav-menu">
                <button onclick="showPage('dashboard')" class="mobile-nav-btn active" data-page="dashboard">
                    <div class="nav-icon">üìä</div>
                    <div class="nav-text">Dashboard</div>
                </button>
                <button onclick="showPage('vendas')" class="mobile-nav-btn" data-page="vendas">
                    <div class="nav-icon">üí≥</div>
                    <div class="nav-text">Vendas</div>
                </button>
                <button onclick="showPage('financeiro')" class="mobile-nav-btn" data-page="financeiro">
                    <div class="nav-icon">üßæ</div>
                    <div class="nav-text">Financeiro</div>
                </button>
                <button onclick="showPage('equipe')" class="mobile-nav-btn" data-page="equipe">
                    <div class="nav-icon">üë•</div>
                    <div class="nav-text">Equipe</div>
                </button>
                <button onclick="showPage('estoque')" class="mobile-nav-btn" data-page="estoque">
                    <div class="nav-icon">üì¶</div>
                    <div class="nav-text">Estoque</div>
                </button>
                <button onclick="showPage('alertas')" class="mobile-nav-btn" data-page="alertas">
                    <div class="nav-icon">üîî</div>
                    <div class="nav-text">Alertas</div>
                </button>
                <button onclick="showPage('cursos')" class="mobile-nav-btn" data-page="cursos">
                    <div class="nav-icon">üíé</div>
                    <div class="nav-text">Dicas</div>
                </button>
                <button onclick="showPage('suporte')" class="mobile-nav-btn" data-page="suporte">
                    <div class="nav-icon">üéß</div>
                    <div class="nav-text">Suporte</div>
                </button>
                <button onclick="showPage('planos')" class="mobile-nav-btn" data-page="planos">
                    <div class="nav-icon">üíé</div>
                    <div class="nav-text">Planos</div>
                </button>
                <button onclick="showPage('config')" class="mobile-nav-btn" data-page="config">
                    <div class="nav-icon">‚öôÔ∏è</div>
                    <div class="nav-text">Config</div>
                </button>
            </div>
        </div>

        <!-- Sidebar Desktop (hidden on mobile) -->
        <aside id="sidebar" class="w-72 bg-gray-100 p-4 border-r hidden md:block">
            <div class="mb-6">
                <h1 class="text-xl font-bold text-blue-600" id="company-name">MyBusinessNow</h1>
                <p class="text-xs text-gray-500 mb-2">Gest√£o Empresarial Inteligente</p>
                <p class="text-sm text-gray-700 font-medium" id="user-company">Sua Empresa</p>
            </div>

            <nav class="flex flex-col gap-2">
                <button onclick="showPage('dashboard')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition bg-white shadow" data-page="dashboard">
                    <span class="w-6">üìä</span>
                    <span class="font-medium">Dashboard</span>
                </button>
                <button onclick="showPage('vendas')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="vendas">
                    <span class="w-6">üí≥</span>
                    <span class="font-medium">Vendas</span>
                </button>
                <button onclick="showPage('financeiro')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="financeiro">
                    <span class="w-6">üßæ</span>
                    <span class="font-medium">Financeiro</span>
                </button>
                <button onclick="showPage('equipe')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="equipe">
                    <span class="w-6">üë•</span>
                    <span class="font-medium">Equipe</span>
                </button>
                <button onclick="showPage('estoque')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="estoque">
                    <span class="w-6">üì¶</span>
                    <span class="font-medium">Controle de Estoque</span>
                </button>
                <button onclick="showPage('alertas')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="alertas">
                    <span class="w-6">üîî</span>
                    <span class="font-medium">Alertas</span>
                </button>
                <button onclick="showPage('sobre')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="sobre">
                    <span class="w-6">‚ÑπÔ∏è</span>
                    <span class="font-medium">Sobre N√≥s</span>
                </button>
                <div class="mt-4 border-t pt-4">
                    <button onclick="showPage('cursos')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="cursos">
                        <span class="w-6">üíé</span>
                        <span class="font-medium">Dicas B√¥nus</span>
                    </button>
                    <button onclick="showPage('suporte')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="suporte">
                        <span class="w-6">üéß</span>
                        <span class="font-medium">Suporte</span>
                    </button>
                    <button onclick="showPage('planos')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="planos">
                        <span class="w-6">üíé</span>
                        <span class="font-medium">Planos</span>
                    </button>
                    <button onclick="showPage('config')" class="nav-btn flex items-center gap-3 px-4 py-2 rounded-md w-full text-left hover:bg-gray-100 transition" data-page="config">
                        <span class="w-6">‚öôÔ∏è</span>
                        <span class="font-medium">Configura√ß√µes</span>
                    </button>
                </div>
            </nav>

            <div id="plan-info" class="mt-6 p-3 bg-blue-50 rounded-lg border border-blue-200">
                <div class="text-sm font-medium text-blue-800">Plano Atual: <strong>Start</strong></div>
                <div class="text-xs text-blue-600 mt-1">R$ 29,90/m√™s</div>
                <div class="text-xs text-blue-600">Limite: R$ 15.000/m√™s</div>
                <button onclick="showPage('planos')" class="mt-2 text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700 transition">Upgrade</button>
            </div>
        </aside>

        <!-- Main area -->
        <main class="flex-1 main-content-mobile md:main-content-tablet lg:main-content-desktop p-4 md:p-6">
            <header class="flex flex-col md:flex-row md:items-center justify-between mb-4 md:mb-6 gap-4">
                <div class="flex-1">
                    <h2 id="page-title" class="text-lg md:text-xl font-semibold capitalize">Dashboard</h2>
                    <p class="text-xs md:text-sm text-gray-500">√öltima atualiza√ß√£o: <span id="last-update">agora</span></p>
                </div>
                <div class="hidden md:flex items-center gap-4">
                    <div class="text-sm text-gray-600">Usu√°rio: <strong id="user-name">Usu√°rio</strong></div>
                    <button onclick="logout()" class="touch-target px-3 py-2 bg-white border rounded hover:bg-gray-50 transition">Sair</button>
                </div>
            </header>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page-content space-y-6">
                <section class="grid grid-cols-1 md:grid-cols-3 gap-4 grid-mobile">
                    <div class="dashboard-card-mobile slide-in-up">
                        <h3 class="text-mobile-sm font-medium text-gray-600 mb-3">üí∞ Vendas Hoje</h3>
                        <p class="text-mobile-xl font-bold text-green-600 mb-2" id="vendas-hoje">R$ 0,00</p>
                        <p class="text-mobile-sm text-gray-500" id="vendas-count">0 vendas registradas</p>
                    </div>
                    <div class="dashboard-card-mobile slide-in-up" style="animation-delay: 0.1s">
                        <h3 class="text-mobile-sm font-medium text-gray-600 mb-3">üßæ Despesas Hoje</h3>
                        <p class="text-mobile-xl font-bold text-red-600 mb-2" id="despesas-hoje">R$ 0,00</p>
                        <p class="text-mobile-sm text-gray-500">Gastos operacionais</p>
                    </div>
                    <div class="dashboard-card-mobile slide-in-up" style="animation-delay: 0.2s">
                        <h3 class="text-mobile-sm font-medium text-gray-600 mb-3">üíé Lucro L√≠quido</h3>
                        <p class="text-mobile-xl font-bold text-purple-600 mb-2" id="lucro-hoje">R$ 0,00</p>
                        <p class="text-mobile-sm text-gray-500" id="margem-lucro">Seu ganho real hoje</p>
                    </div>
                </section>

                <!-- Alertas de Desempenho -->
                <section id="performance-alerts" class="space-y-4">
                    <!-- Alertas ser√£o gerados dinamicamente -->
                </section>

                <!-- Gr√°ficos de Desempenho -->
                <section class="bg-white p-6 rounded-lg shadow" id="performance-charts-section">
                    <!-- Conte√∫do ser√° renderizado dinamicamente baseado no plano -->
                </section>

                <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 grid-mobile">
                    <div class="card-mobile slide-in-up" style="animation-delay: 0.3s">
                        <h3 class="text-mobile-lg font-semibold mb-4">üìä Resumo Financeiro do Dia</h3>
                        <div class="text-mobile-sm text-gray-600 mb-4">
                            Acompanhe o desempenho financeiro do seu neg√≥cio hoje
                        </div>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                                <span class="text-mobile text-gray-700 font-medium">üí∞ Total de Vendas:</span>
                                <span class="text-mobile font-bold text-green-600" id="vendas-brutas">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-orange-50 rounded-lg">
                                <span class="text-mobile text-gray-700 font-medium">üì¶ Custo dos Produtos:</span>
                                <span class="text-mobile font-bold text-orange-600" id="custo-produtos">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                                <span class="text-mobile text-gray-700 font-medium">üßæ Despesas do Dia:</span>
                                <span class="text-mobile font-bold text-red-600" id="despesas-operacionais">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg border-2 border-purple-200">
                                <span class="text-mobile text-gray-800 font-bold">üíé Lucro L√≠quido:</span>
                                <span class="text-mobile-lg font-bold text-purple-600" id="lucro-liquido">R$ 0,00</span>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200">
                            <div class="text-mobile-sm text-blue-700">
                                <strong>üí° Como calculamos:</strong> Vendas - Custo dos Produtos - Despesas = Lucro
                            </div>
                        </div>
                    </div>

                    <div class="card-mobile slide-in-up" style="animation-delay: 0.4s">
                        <h3 class="text-mobile-lg font-semibold mb-4">üë• Status da Equipe Hoje</h3>
                        <div class="text-mobile-sm text-gray-600 mb-4">
                            Veja quem est√° trabalhando e quem est√° de folga
                        </div>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                                <span class="text-mobile text-gray-700 font-medium">üë• Total de Funcion√°rios:</span>
                                <span class="text-mobile font-bold text-blue-600" id="total-funcionarios">0</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-green-50 rounded-lg">
                                <span class="text-mobile text-gray-700 font-medium">‚úÖ Trabalhando Hoje:</span>
                                <span class="text-mobile font-bold text-green-600" id="funcionarios-trabalhando">0</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                                <span class="text-mobile text-gray-700 font-medium">üèñÔ∏è De Folga Hoje:</span>
                                <span class="text-mobile font-bold text-yellow-600" id="funcionarios-folga">0</span>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-green-50 rounded-lg border border-green-200">
                            <div class="text-mobile-sm text-green-700">
                                <strong>üí° Dica:</strong> V√° na aba "Equipe" para alterar o status dos funcion√°rios
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Vendas Page -->
            <div id="vendas-page" class="page-content space-y-6 hidden">
                <!-- Floating Action Button para mobile -->
                <button onclick="scrollToForm('venda-form')" class="fab-mobile md:hidden bounce-in" title="Nova Venda">
                    üí∞
                </button>
                
                <!-- Header da p√°gina com total -->
                <div class="card-mobile slide-in-up">
                    <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
                        <div>
                            <h3 class="text-mobile-xl font-bold text-gray-800 mb-2">üìä Vendas do Dia</h3>
                            <p class="text-mobile-sm text-gray-600">Acompanhe todas as vendas realizadas hoje</p>
                        </div>
                        <div class="bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-3 rounded-xl text-center">
                            <div class="text-mobile-sm font-medium">Total Vendido</div>
                            <div class="text-mobile-lg font-bold" id="total-vendas-dia">R$ 0,00</div>
                        </div>
                    </div>
                </div>
                
                <div class="list-mobile slide-in-up" style="animation-delay: 0.1s">
                    
                    <!-- Mobile: Lista de cards -->
                    <div class="md:hidden" id="vendas-list-mobile">
                        <div class="text-center py-8 text-gray-500 text-mobile-sm">
                            <div class="text-4xl mb-2">üí≥</div>
                            <p>Nenhuma venda registrada hoje</p>
                            <p class="text-xs mt-1">Use o formul√°rio acima para registrar</p>
                        </div>
                    </div>
                    
                    <!-- Desktop: Tabela tradicional -->
                    <div class="hidden md:block overflow-x-auto overflow-fix">
                        <table class="w-full table-mobile">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-2 text-xs md:text-sm">ID</th>
                                    <th class="text-left py-2 text-xs md:text-sm">Cliente</th>
                                    <th class="text-left py-2 text-xs md:text-sm">Valor</th>
                                    <th class="text-left py-2 text-xs md:text-sm">M√©todo</th>
                                    <th class="text-left py-2 text-xs md:text-sm">Hora</th>
                                </tr>
                            </thead>
                            <tbody id="vendas-list">
                                <tr>
                                    <td colspan="5" class="text-center py-4 text-gray-500 text-xs md:text-sm">Nenhuma venda registrada hoje</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="form-mobile slide-in-up" style="animation-delay: 0.2s">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center">
                            <span class="text-white text-xl">üí∞</span>
                        </div>
                        <div>
                            <h3 class="text-mobile-xl font-bold text-gray-800">Nova Venda</h3>
                            <p class="text-mobile-sm text-gray-600">Registre uma nova venda no sistema</p>
                        </div>
                    </div>
                    
                    <form id="venda-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 grid-mobile">
                            <div class="form-group">
                                <label class="block text-mobile font-semibold text-gray-700 mb-3">üë§ Cliente</label>
                                <input type="text" id="venda-cliente" class="input-mobile" placeholder="Nome do cliente" required>
                            </div>
                            <div class="form-group">
                                <label class="block text-mobile font-semibold text-gray-700 mb-3">üíµ Valor Bruto</label>
                                <input type="number" id="venda-valor" class="input-mobile" placeholder="0,00" step="0.01" required>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 grid-mobile">
                            <div class="form-group">
                                <label class="block text-mobile font-semibold text-gray-700 mb-3">üí≥ M√©todo de Pagamento</label>
                                <select id="venda-metodo" class="select-mobile" required>
                                    <option value="">Selecione o m√©todo</option>
                                    <option value="dinheiro">üíµ Dinheiro</option>
                                    <option value="cartao">üí≥ Cart√£o</option>
                                    <option value="pix">üì± PIX</option>
                                    <option value="transferencia">üè¶ Transfer√™ncia</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="block text-mobile font-semibold text-gray-700 mb-3">üìä Custo do Produto (%)</label>
                                <input type="number" id="venda-custo" class="input-mobile" placeholder="50" min="0" max="100" value="50">
                            </div>
                        </div>
                        <button type="submit" class="btn-mobile-lg w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800">
                            <span class="text-xl mr-2">üí∞</span>
                            Registrar Venda
                        </button>
                    </form>
                </div>
            </div>

            <!-- Equipe Page -->
            <div id="equipe-page" class="page-content space-y-6 hidden">
                <div class="bg-white p-6 rounded-lg shadow">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">Gest√£o de Equipe</h3>
                        <button onclick="showAddEmployee()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
                            + Adicionar Funcion√°rio
                        </button>
                    </div>
                    <div id="funcionarios-list" class="space-y-3">
                        <p class="text-gray-500 text-center py-4">Nenhum funcion√°rio cadastrado</p>
                    </div>
                </div>

                <!-- Add Employee Modal -->
                <div id="add-employee-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 hidden z-50">
                    <div class="bg-white rounded-2xl p-6 w-full max-w-md slide-in-up shadow-2xl">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center">
                                <span class="text-white text-xl">üë•</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-mobile-xl font-bold text-gray-800">Adicionar Funcion√°rio</h3>
                                <p class="text-mobile-sm text-gray-600">Cadastre um novo membro da equipe</p>
                            </div>
                            <button onclick="hideAddEmployee()" class="w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 hover:bg-gray-200 transition">
                                √ó
                            </button>
                        </div>
                        
                        <form id="employee-form" class="space-y-6">
                            <div class="form-group">
                                <label class="block text-mobile font-semibold text-gray-700 mb-3">üë§ Nome do Funcion√°rio</label>
                                <input type="text" id="emp-name" class="input-mobile" placeholder="Digite o nome completo" required>
                            </div>
                            
                            <div class="flex gap-3 pt-2">
                                <button type="submit" class="btn-mobile-lg flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800">
                                    <span class="mr-2">‚úÖ</span>
                                    Adicionar
                                </button>
                                <button type="button" onclick="hideAddEmployee()" class="btn-mobile-lg flex-1 bg-gradient-to-r from-gray-400 to-gray-500 text-white hover:from-gray-500 hover:to-gray-600">
                                    <span class="mr-2">‚ùå</span>
                                    Cancelar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Financeiro Page -->
            <div id="financeiro-page" class="page-content space-y-6 hidden">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold mb-4">Adicionar Despesa</h3>
                    <form id="despesa-form" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Descri√ß√£o</label>
                                <input type="text" id="despesa-desc" class="w-full p-2 border rounded-md" placeholder="Ex: Aluguel, Energia, etc." required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Valor</label>
                                <input type="number" id="despesa-valor" class="w-full p-2 border rounded-md" step="0.01" required>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Categoria</label>
                                <select id="despesa-categoria" class="w-full p-2 border rounded-md" required>
                                    <option value="">Selecione</option>
                                    <option value="operacional">Operacional</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="equipamentos">Equipamentos</option>
                                    <option value="outros">Outros</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Tipo</label>
                                <select id="despesa-tipo" class="w-full p-2 border rounded-md" required>
                                    <option value="fixa">Fixa</option>
                                    <option value="variavel">Vari√°vel</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition">Adicionar Despesa</button>
                    </form>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-4">Despesas do M√™s</h3>
                        <div id="despesas-list" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">Nenhuma despesa registrada</p>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-lg font-semibold mb-4">An√°lise Financeira</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>Receita Bruta:</span>
                                <span class="text-green-600 font-semibold" id="receita-bruta-mes">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Despesas Totais:</span>
                                <span class="text-red-600 font-semibold" id="despesas-totais-mes">R$ 0,00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Margem Bruta:</span>
                                <span class="text-blue-600 font-semibold" id="margem-bruta">0%</span>
                            </div>
                            <div class="border-t pt-2 flex justify-between font-semibold">
                                <span>Lucro L√≠quido:</span>
                                <span class="text-purple-600" id="lucro-liquido-mes">R$ 0,00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Estoque Page -->
            <div id="estoque-page" class="page-content space-y-6 hidden">
                <!-- Resumo do Estoque -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600 mb-2">üì¶ Empresas Cadastradas</h3>
                        <p class="text-xl font-bold text-blue-600" id="total-empresas-estoque">0</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600 mb-2">üìã Produtos em Estoque</h3>
                        <p class="text-xl font-bold text-green-600" id="total-produtos-estoque">0</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="text-sm font-medium text-gray-600 mb-2">üìÖ √öltima Atualiza√ß√£o</h3>
                        <p class="text-sm font-bold text-purple-600" id="ultima-atualizacao-estoque">Nunca</p>
                    </div>
                </div>

                <!-- Bot√£o de Atualiza√ß√£o de Estoque -->
                <div class="bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg">
                    <div class="text-center">
                        <h3 class="text-xl font-bold mb-2">üì¶ Atualiza√ß√£o de Estoque</h3>
                        <p class="mb-4">Clique aqui quando fizer a verifica√ß√£o completa do seu estoque</p>
                        <button onclick="atualizarEstoque()" class="bg-white text-green-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
                            ‚úÖ Marquei que Atualizei o Estoque
                        </button>
                    </div>
                </div>

                <!-- Lista de Estoque -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold">Controle de Estoque</h3>
                        <button onclick="showAddEstoque()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
                            + Adicionar Item
                        </button>
                    </div>
                    <div id="estoque-list" class="space-y-4">
                        <p class="text-gray-500 text-center py-4">Nenhum item cadastrado no estoque</p>
                    </div>
                </div>

                <!-- Modal Adicionar Item ao Estoque -->
                <div id="add-estoque-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
                    <div class="bg-white rounded-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-semibold mb-4">Adicionar Item ao Estoque</h3>
                        <form id="estoque-form" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Nome da Empresa *</label>
                                <input type="text" id="estoque-empresa" class="w-full p-3 border rounded-md" placeholder="Ex: Distribuidora ABC" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-1">Produto *</label>
                                <input type="text" id="estoque-produto" class="w-full p-3 border rounded-md" placeholder="Ex: A√ß√∫car, Farinha, Equipamentos..." required>
                            </div>

                            <div class="flex gap-2 pt-4">
                                <button type="submit" class="flex-1 bg-blue-600 text-white py-3 rounded-md hover:bg-blue-700 transition font-medium">
                                    Adicionar ao Estoque
                                </button>
                                <button type="button" onclick="hideAddEstoque()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-md hover:bg-gray-400 transition font-medium">
                                    Cancelar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Modal Editar Item do Estoque -->
                <div id="edit-estoque-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
                    <div class="bg-white rounded-lg p-6 w-full max-w-md">
                        <h3 class="text-lg font-semibold mb-4">Editar Item do Estoque</h3>
                        <form id="edit-estoque-form" class="space-y-4">
                            <input type="hidden" id="edit-estoque-id">
                            
                            <div>
                                <label class="block text-sm font-medium mb-1">Nome da Empresa</label>
                                <input type="text" id="edit-estoque-empresa" class="w-full p-3 border rounded-md" required>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium mb-1">Produto</label>
                                <input type="text" id="edit-estoque-produto" class="w-full p-3 border rounded-md" required>
                            </div>

                            <div class="flex gap-2 pt-4">
                                <button type="submit" class="flex-1 bg-blue-600 text-white py-3 rounded-md hover:bg-blue-700 transition font-medium">
                                    Salvar Altera√ß√µes
                                </button>
                                <button type="button" onclick="hideEditEstoque()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-md hover:bg-gray-400 transition font-medium">
                                    Cancelar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="alertas-page" class="page-content space-y-6 hidden">
                <div id="alertas-container" class="space-y-4">
                    <!-- Alertas ser√£o gerados dinamicamente -->
                </div>
            </div>

            <!-- Sobre N√≥s Page -->
            <div id="sobre-page" class="page-content space-y-6 hidden">
                <!-- Hero Section -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-lg">
                    <div class="text-center">
                        <h1 class="text-4xl font-bold mb-4">MyBusinessNow</h1>
                        <p class="text-xl mb-6">Gest√£o Empresarial Inteligente</p>
                        <p class="text-lg opacity-90">Transformando pequenos neg√≥cios em grandes sucessos</p>
                    </div>
                </div>

                <!-- Nossa Miss√£o -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üéØ</div>
                            <h3 class="text-xl font-bold text-gray-800">Nossa Miss√£o</h3>
                        </div>
                        <p class="text-gray-600 text-center">
                            Democratizar a gest√£o empresarial, oferecendo ferramentas inteligentes e acess√≠veis 
                            para que pequenos e m√©dios empres√°rios possam tomar decis√µes baseadas em dados 
                            e fazer seus neg√≥cios crescerem de forma sustent√°vel.
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-lg shadow">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-2">üöÄ</div>
                            <h3 class="text-xl font-bold text-gray-800">Nossa Vis√£o</h3>
                        </div>
                        <p class="text-gray-600 text-center">
                            Ser a plataforma l√≠der em gest√£o empresarial para PMEs no Brasil, 
                            capacitando empreendedores com conhecimento e tecnologia para 
                            transformar suas ideias em neg√≥cios pr√≥speros e duradouros.
                        </p>
                    </div>
                </div>

                <!-- O que fazemos -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-2xl font-bold text-center mb-6">O que o MyBusinessNow faz por voc√™</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-3xl mb-3">üìä</div>
                            <h4 class="font-semibold mb-2">Gest√£o Financeira</h4>
                            <p class="text-sm text-gray-600">
                                Controle completo de vendas, despesas e fluxo de caixa. 
                                Relat√≥rios em tempo real para decis√µes inteligentes.
                            </p>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-3xl mb-3">üë•</div>
                            <h4 class="font-semibold mb-2">Gest√£o de Equipe</h4>
                            <p class="text-sm text-gray-600">
                                Organize sua equipe, controle escalas e monitore 
                                a produtividade de forma simples e eficiente.
                            </p>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-3xl mb-3">üì¶</div>
                            <h4 class="font-semibold mb-2">Controle de Fornecedores</h4>
                            <p class="text-sm text-gray-600">
                                Gerencie seus fornecedores, produtos e entregas. 
                                Mantenha tudo organizado em um s√≥ lugar.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Nossos Valores -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-2xl font-bold text-center mb-6">Nossos Valores</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="text-center p-4 bg-blue-50 rounded-lg">
                            <div class="text-2xl mb-2">üí°</div>
                            <h4 class="font-semibold text-blue-800">Inova√ß√£o</h4>
                            <p class="text-xs text-blue-600 mt-1">Sempre buscando solu√ß√µes criativas</p>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg">
                            <div class="text-2xl mb-2">ü§ù</div>
                            <h4 class="font-semibold text-green-800">Confian√ßa</h4>
                            <p class="text-xs text-green-600 mt-1">Transpar√™ncia em tudo que fazemos</p>
                        </div>
                        
                        <div class="text-center p-4 bg-purple-50 rounded-lg">
                            <div class="text-2xl mb-2">üéØ</div>
                            <h4 class="font-semibold text-purple-800">Foco</h4>
                            <p class="text-xs text-purple-600 mt-1">Resultados que realmente importam</p>
                        </div>
                        
                        <div class="text-center p-4 bg-yellow-50 rounded-lg">
                            <div class="text-2xl mb-2">üåü</div>
                            <h4 class="font-semibold text-yellow-800">Excel√™ncia</h4>
                            <p class="text-xs text-yellow-600 mt-1">Qualidade em cada detalhe</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dicas B√¥nus Premium Page -->
            <div id="cursos-page" class="page-content space-y-6 hidden">
                <!-- Header -->
                <div class="bg-gradient-to-r from-purple-600 to-pink-600 text-white p-8 rounded-lg">
                    <div class="text-center">
                        <h1 class="text-3xl font-bold mb-4">üíé Dicas B√¥nus Premium</h1>
                        <p class="text-lg mb-4">Estrat√©gias exclusivas para empres√°rios de sucesso</p>
                        <p class="opacity-90">Aplique essas dicas e veja seu neg√≥cio decolar</p>
                    </div>
                </div>

                <!-- Dicas por Categoria -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Vendas de Alto Impacto -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-green-500 to-green-600 p-4">
                            <div class="text-center text-white">
                                <div class="text-3xl mb-2">üí∞</div>
                                <h3 class="text-xl font-bold">Vendas de Alto Impacto</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                    <h4 class="font-bold text-green-800 mb-2">üéØ Regra dos 3 SIMs</h4>
                                    <p class="text-sm text-green-700">Fa√ßa 3 perguntas que o cliente responda "SIM" antes de apresentar o pre√ßo. Exemplo: "Voc√™ quer economizar tempo?" "Quer ter mais qualidade?" "Quer garantia?" Depois apresente sua solu√ß√£o.</p>
                                </div>
                                
                                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                    <h4 class="font-bold text-green-800 mb-2">üî• T√©cnica do Espelho</h4>
                                    <p class="text-sm text-green-700">Repita as √∫ltimas 3 palavras do cliente como pergunta. Cliente: "Est√° muito caro" - Voc√™: "Muito caro?" Ele vai explicar a real obje√ß√£o e voc√™ pode contornar.</p>
                                </div>
                                
                                <div class="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                                    <h4 class="font-bold text-green-800 mb-2">‚ö° Poder do Sil√™ncio</h4>
                                    <p class="text-sm text-green-700">Ap√≥s apresentar o pre√ßo, CALE A BOCA. Quem falar primeiro perde. O cliente vai processar a informa√ß√£o e dar a resposta. N√£o tenha medo do sil√™ncio.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Capta√ß√£o de Clientes -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-4">
                            <div class="text-center text-white">
                                <div class="text-3xl mb-2">üéØ</div>
                                <h3 class="text-xl font-bold">Capta√ß√£o de Clientes</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                    <h4 class="font-bold text-blue-800 mb-2">üì± F√≥rmula do Conte√∫do (80/15/5)</h4>
                                    <p class="text-sm text-blue-700">80% dicas de valor gratuitas, 15% cases de sucesso dos seus clientes, 5% ofertas diretas. Essa propor√ß√£o mant√©m o p√∫blico engajado e interessado.</p>
                                </div>
                                
                                <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                    <h4 class="font-bold text-blue-800 mb-2">üéÅ Isca Digital Irresist√≠vel</h4>
                                    <p class="text-sm text-blue-700">Crie um material gratuito que resolve 80% do problema. Exemplo: "Planilha que aumenta vendas em 30%". Colete WhatsApp para entregar. 70% v√£o comprar depois.</p>
                                </div>
                                
                                <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                                    <h4 class="font-bold text-blue-800 mb-2">‚è∞ Regra dos 5 Minutos</h4>
                                    <p class="text-sm text-blue-700">Ligue para leads em at√© 5 minutos ap√≥s o cadastro. 80% dos concorrentes n√£o fazem isso. Quem liga primeiro, vende primeiro.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Negocia√ß√£o Avan√ßada -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-orange-500 to-orange-600 p-4">
                            <div class="text-center text-white">
                                <div class="text-3xl mb-2">ü§ù</div>
                                <h3 class="text-xl font-bold">Negocia√ß√£o Avan√ßada</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
                                    <h4 class="font-bold text-orange-800 mb-2">üéØ T√©cnica da √Çncora</h4>
                                    <p class="text-sm text-orange-700">Sempre fale seu pre√ßo primeiro e alto. "Normalmente cobro R$5mil, mas para voc√™..." O c√©rebro ancora nos R$5mil e qualquer valor menor parece barato.</p>
                                </div>
                                
                                <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
                                    <h4 class="font-bold text-orange-800 mb-2">üé≠ Poder do Terceiro</h4>
                                    <p class="text-sm text-orange-700">"Vou ter que consultar meu s√≥cio/contador". Cria a impress√£o que voc√™ n√£o decide sozinho e ganha tempo para pensar. Sempre funciona.</p>
                                </div>
                                
                                <div class="bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500">
                                    <h4 class="font-bold text-orange-800 mb-2">üíé Concess√£o Condicional</h4>
                                    <p class="text-sm text-orange-700">Nunca d√™ desconto de gra√ßa. "Posso fazer por R$X, MAS voc√™ precisa pagar √† vista e fechar hoje". Toda concess√£o precisa de contrapartida.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Lideran√ßa Executiva -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-purple-500 to-purple-600 p-4">
                            <div class="text-center text-white">
                                <div class="text-3xl mb-2">üëë</div>
                                <h3 class="text-xl font-bold">Lideran√ßa Executiva</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                    <h4 class="font-bold text-purple-800 mb-2">‚ö° Regra dos 5 Minutos</h4>
                                    <p class="text-sm text-purple-700">Todo problema que chega at√© voc√™, d√™ 5 minutos para o funcion√°rio apresentar uma solu√ß√£o. N√£o resolva para ele, ensine ele a resolver.</p>
                                </div>
                                
                                <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                    <h4 class="font-bold text-purple-800 mb-2">üìä Feedback Semanal</h4>
                                    <p class="text-sm text-purple-700">15 minutos individuais com cada funcion√°rio toda semana. Pergunte: "O que foi bem?" "O que pode melhorar?" "Que ajuda precisa?"</p>
                                </div>
                                
                                <div class="bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500">
                                    <h4 class="font-bold text-purple-800 mb-2">üèÜ Reconhecimento P√∫blico</h4>
                                    <p class="text-sm text-purple-700">Elogie publicamente, critique em particular. Funcion√°rio reconhecido na frente dos outros produz 40% mais. Humilha√ß√£o p√∫blica destr√≥i equipes.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mentalidade de Sucesso -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 p-4">
                            <div class="text-center text-white">
                                <div class="text-3xl mb-2">üß†</div>
                                <h3 class="text-xl font-bold">Mentalidade de Sucesso</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                    <h4 class="font-bold text-yellow-800 mb-2">üéØ Regra dos 90 Dias</h4>
                                    <p class="text-sm text-yellow-700">Defina 1 meta grande para 90 dias e trabalhe nela TODO DIA. Exemplo: "Faturar R$50mil" = R$555/dia. Quebre em a√ß√µes di√°rias e execute sem falhar.</p>
                                </div>
                                
                                <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                    <h4 class="font-bold text-yellow-800 mb-2">üåÖ Hora Sagrada</h4>
                                    <p class="text-sm text-yellow-700">Acorde 1 hora mais cedo e use para planejar o dia. Essa hora vale ouro. Quem controla a manh√£, controla o dia. Quem controla o dia, controla a vida.</p>
                                </div>
                                
                                <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500">
                                    <h4 class="font-bold text-yellow-800 mb-2">üìù Di√°rio de Vit√≥rias</h4>
                                    <p class="text-sm text-yellow-700">Antes de dormir, escreva 3 coisas boas do dia. C√©rebro grato √© c√©rebro pr√≥spero. Foque no que tem, n√£o no que falta. Abund√¢ncia atrai abund√¢ncia.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Crescimento Empresarial -->
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="bg-gradient-to-r from-red-500 to-red-600 p-4">
                            <div class="text-center text-white">
                                <div class="text-3xl mb-2">üìà</div>
                                <h3 class="text-xl font-bold">Crescimento Empresarial</h3>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                    <h4 class="font-bold text-red-800 mb-2">üíé Regra 80/20</h4>
                                    <p class="text-sm text-red-700">80% do lucro vem de 20% dos clientes. Identifique esses 20% e foque neles. Pare de perder tempo com cliente que d√° pouco retorno.</p>
                                </div>
                                
                                <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                    <h4 class="font-bold text-red-800 mb-2">üîÑ Sistema de Indica√ß√£o</h4>
                                    <p class="text-sm text-red-700">Cliente satisfeito indica 3 pessoas. Crie sistema: "A cada 3 indica√ß√µes que virarem clientes, voc√™ ganha 1 m√™s gr√°tis". Crescimento org√¢nico √© o mais barato.</p>
                                </div>
                                
                                <div class="bg-red-50 p-4 rounded-lg border-l-4 border-red-500">
                                    <h4 class="font-bold text-red-800 mb-2">üìä M√©tricas que Importam</h4>
                                    <p class="text-sm text-red-700">Acompanhe diariamente: Leads, Convers√£o, Ticket M√©dio, CAC (Custo de Aquisi√ß√£o), LTV (Lifetime Value). Se n√£o mede, n√£o gerencia. Se n√£o gerencia, n√£o cresce.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Call to Action Final -->
                <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white p-8 rounded-lg">
                    <div class="text-center">
                        <div class="text-5xl mb-4">üí°</div>
                        <h2 class="text-3xl font-bold mb-4">Aplique Essas Dicas Hoje Mesmo!</h2>
                        <p class="text-lg mb-6">Conhecimento sem a√ß√£o √© apenas entretenimento</p>
                        
                        <div class="mb-6">
                            <p class="text-yellow-400 font-semibold">üéØ Escolha 1 dica de cada categoria e aplique esta semana</p>
                            <p class="text-sm opacity-75 mt-2">Pequenas a√ß√µes consistentes geram grandes resultados</p>
                        </div>
                        
                        <button onclick="showPage('dashboard')" class="bg-yellow-500 text-gray-900 px-8 py-4 rounded-lg text-xl font-bold hover:bg-yellow-400 transition">
                            üöÄ Voltar ao Dashboard e Aplicar!
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal do Curso -->
            <div id="curso-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
                <div class="bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-2xl font-bold" id="curso-title">Curso</h3>
                        <button onclick="fecharCurso()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                    </div>
                    
                    <div id="curso-content" class="space-y-6">
                        <!-- Conte√∫do ser√° carregado dinamicamente -->
                    </div>
                </div>
            </div>

            <!-- Suporte Page -->
            <div id="suporte-page" class="page-content space-y-6 hidden">
                <!-- Header do Suporte -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg">
                    <div class="text-center">
                        <h1 class="text-3xl font-bold mb-2">üéß Central de Suporte</h1>
                        <p class="text-lg">Estamos aqui para ajudar voc√™ a ter sucesso!</p>
                    </div>
                </div>

                <!-- Canais de Suporte Dispon√≠veis -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Email Support (Todos os planos) -->
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-3">üìß</div>
                            <h3 class="text-xl font-bold text-gray-800">Suporte por Email</h3>
                            <p class="text-sm text-gray-600 mt-2">Dispon√≠vel para todos os planos</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-blue-50 p-4 rounded-lg">
                                <h4 class="font-semibold text-blue-800 mb-2">üì¨ Como funciona:</h4>
                                <ul class="text-sm text-blue-700 space-y-1">
                                    <li>‚úÖ Resposta em at√© 24 horas</li>
                                    <li>‚úÖ Suporte t√©cnico especializado</li>
                                    <li>‚úÖ D√∫vidas sobre funcionalidades</li>
                                    <li>‚úÖ Orienta√ß√µes de uso</li>
                                </ul>
                            </div>
                            
                            <div class="text-center">
                                <p class="text-sm text-gray-600 mb-3">Nosso email oficial:</p>
                                <div class="bg-gray-100 p-3 rounded-lg mb-4">
                                    <p class="font-mono text-sm font-semibold text-gray-800">mybusinessnowempresa@gmail.com</p>
                                </div>
                                <button onclick="abrirEmailSuport()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-medium">
                                    üìß Enviar Email
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- WhatsApp Support (Apenas Gold) -->
                    <div class="bg-white rounded-lg shadow-lg p-6 relative">
                        <div class="text-center mb-4">
                            <div class="text-4xl mb-3">üí¨</div>
                            <h3 class="text-xl font-bold text-gray-800">Suporte via WhatsApp</h3>
                            <p class="text-sm text-gray-600 mt-2">Exclusivo para plano Gold</p>
                        </div>
                        
                        <div id="whatsapp-support-content">
                            <!-- Conte√∫do ser√° renderizado dinamicamente baseado no plano -->
                        </div>
                    </div>
                </div>

                <!-- FAQ R√°pido -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4">‚ùì Perguntas Frequentes</h3>
                    
                    <div class="space-y-4">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-semibold text-gray-800">Como alterar meu plano?</h4>
                            <p class="text-sm text-gray-600">V√° em "Planos" no menu lateral e clique em "Fazer Upgrade" no plano desejado.</p>
                        </div>
                        
                        <div class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-semibold text-gray-800">Como exportar meus dados?</h4>
                            <p class="text-sm text-gray-600">Entre em contato conosco por email que enviaremos seus dados em formato Excel.</p>
                        </div>
                        
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h4 class="font-semibold text-gray-800">Posso cancelar a qualquer momento?</h4>
                            <p class="text-sm text-gray-600">Sim! N√£o h√° fidelidade. Envie um email solicitando o cancelamento.</p>
                        </div>
                        
                        <div class="border-l-4 border-orange-500 pl-4">
                            <h4 class="font-semibold text-gray-800">Como funciona o per√≠odo de teste?</h4>
                            <p class="text-sm text-gray-600">Todos os planos t√™m 7 dias gr√°tis. Ap√≥s esse per√≠odo, a cobran√ßa √© autom√°tica.</p>
                        </div>
                    </div>
                </div>

                <!-- Hor√°rios de Atendimento -->
                <div class="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg border border-green-200">
                    <div class="text-center">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">üïê Hor√°rios de Atendimento</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-semibold text-blue-800 mb-2">üìß Suporte por Email</h4>
                                <p class="text-sm text-gray-700">Segunda a Sexta: 8h √†s 18h</p>
                                <p class="text-sm text-gray-700">S√°bado: 8h √†s 12h</p>
                                <p class="text-xs text-gray-600 mt-1">Resposta em at√© 24h √∫teis</p>
                            </div>
                            
                            <div>
                                <h4 class="font-semibold text-green-800 mb-2">üí¨ WhatsApp (Gold)</h4>
                                <p class="text-sm text-gray-700">Segunda a Sexta: 9h √†s 17h</p>
                                <p class="text-sm text-gray-700">Resposta imediata</p>
                                <p class="text-xs text-gray-600 mt-1">Suporte priorit√°rio</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Planos and Config pages remain the same -->
            <div id="planos-page" class="page-content space-y-6 hidden">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold mb-2">Escolha o Plano Ideal</h3>
                    <p class="text-gray-600">Selecione o plano que melhor se adequa ao faturamento do seu neg√≥cio</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Plano Start -->
                    <div class="bg-white rounded-lg shadow-lg border-2 border-blue-200 relative">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                            <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-medium">ATUAL</span>
                        </div>
                        <div class="p-6">
                            <div class="text-center mb-6">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Start</h4>
                                <div class="text-3xl font-bold text-blue-600 mb-1">R$ 29,90</div>
                                <div class="text-sm text-gray-500">por m√™s</div>
                            </div>
                            
                            <div class="mb-6">
                                <div class="bg-blue-50 p-3 rounded-lg text-center">
                                    <div class="text-sm text-blue-600 font-medium">Lucro L√≠quido at√©</div>
                                    <div class="text-lg font-bold text-blue-800">R$ 15.000/m√™s</div>
                                </div>
                            </div>

                            <ul class="space-y-3 mb-6">
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Dashboard b√°sico</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Controle de vendas</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Gest√£o de equipe b√°sica</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Relat√≥rios simples</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Suporte por email</span>
                                </li>
                            </ul>

                            <button class="w-full bg-gray-300 text-gray-500 py-2 rounded-md cursor-not-allowed">
                                Plano Atual
                            </button>
                        </div>
                    </div>

                    <!-- Plano Premium -->
                    <div class="bg-white rounded-lg shadow-lg border-2 border-purple-200 relative transform scale-105">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                            <span class="bg-purple-600 text-white px-3 py-1 rounded-full text-xs font-medium">POPULAR</span>
                        </div>
                        <div class="p-6">
                            <div class="text-center mb-6">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Premium</h4>
                                <div class="text-3xl font-bold text-purple-600 mb-1">R$ 57,90</div>
                                <div class="text-sm text-gray-500">por m√™s</div>
                            </div>
                            
                            <div class="mb-6">
                                <div class="bg-purple-50 p-3 rounded-lg text-center">
                                    <div class="text-sm text-purple-600 font-medium">Lucro L√≠quido at√©</div>
                                    <div class="text-lg font-bold text-purple-800">R$ 25.000/m√™s</div>
                                </div>
                            </div>

                            <ul class="space-y-3 mb-6">
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Tudo do Start +</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Gr√°ficos de desempenho</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">An√°lise de ticket m√©dio</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Relat√≥rios mensais autom√°ticos</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Insights de valores recorrentes</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Suporte por email</span>
                                </li>
                            </ul>

                            <button onclick="upgradePlan('premium')" class="w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition">
                                Fazer Upgrade
                            </button>
                        </div>
                    </div>

                    <!-- Plano Gold -->
                    <div class="bg-white rounded-lg shadow-lg border-2 border-yellow-200 relative">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                            <span class="bg-yellow-600 text-white px-3 py-1 rounded-full text-xs font-medium">EMPRESARIAL</span>
                        </div>
                        <div class="p-6">
                            <div class="text-center mb-6">
                                <h4 class="text-xl font-bold text-gray-800 mb-2">Gold</h4>
                                <div class="text-3xl font-bold text-yellow-600 mb-1">R$ 117,90</div>
                                <div class="text-sm text-gray-500">por m√™s</div>
                            </div>
                            
                            <div class="mb-6">
                                <div class="bg-yellow-50 p-3 rounded-lg text-center">
                                    <div class="text-sm text-yellow-600 font-medium">Lucro L√≠quido at√©</div>
                                    <div class="text-lg font-bold text-yellow-800">R$ 50.000/m√™s</div>
                                </div>
                            </div>

                            <ul class="space-y-3 mb-6">
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Tudo do Premium +</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">An√°lise avan√ßada completa</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Estrat√©gias personalizadas</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Suporte via WhatsApp</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Consultoria de neg√≥cios</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <span class="text-green-500">‚úì</span>
                                    <span class="text-sm">Atendimento priorit√°rio</span>
                                </li>
                            </ul>

                            <button onclick="upgradePlan('gold')" class="w-full bg-yellow-600 text-white py-2 rounded-md hover:bg-yellow-700 transition">
                                Fazer Upgrade
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="config-page" class="page-content space-y-6 hidden">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold mb-4">Configura√ß√µes da Empresa</h3>
                    <form id="config-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1">Nome da Empresa</label>
                            <input type="text" id="config-company" class="w-full p-2 border rounded-md">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Email</label>
                            <input type="email" id="config-email" class="w-full p-2 border rounded-md">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">Setor</label>
                            <select id="config-sector" class="w-full p-2 border rounded-md">
                                <option value="varejo">Varejo</option>
                                <option value="servicos">Servi√ßos</option>
                                <option value="alimentacao">Alimenta√ß√£o</option>
                                <option value="tecnologia">Tecnologia</option>
                                <option value="outros">Outros</option>
                            </select>
                        </div>
                        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">Salvar Configura√ß√µes</button>
                    </form>
                </div>


            </div>
        </main>
    </div>

    <script>
        // Data storage
        let currentUser = null;
        let businessData = {
            vendas: [],
            funcionarios: [],
            despesas: [],
            estoque: [],
            ultimaAtualizacaoEstoque: null,
            config: {}
        };
        
        // Auto-save function
        function saveBusinessData() {
            try {
                if (currentUser && currentUser.email) {
                    // Garantir que businessData tem estrutura correta
                    const dataToSave = {
                        vendas: businessData.vendas || [],
                        funcionarios: businessData.funcionarios || [],
                        despesas: businessData.despesas || [],
                        estoque: businessData.estoque || [],
                        ultimaAtualizacaoEstoque: businessData.ultimaAtualizacaoEstoque || null,
                        config: businessData.config || currentUser,
                        lastSaved: new Date().toISOString()
                    };
                    
                    // Salvar dados do neg√≥cio
                    localStorage.setItem(`business_${currentUser.email}`, JSON.stringify(dataToSave));
                    
                    // Salvar plano atual
                    localStorage.setItem(`plan_${currentUser.email}`, JSON.stringify(currentPlan));
                    
                    // Salvar informa√ß√µes do trial
                    localStorage.setItem(`trial_${currentUser.email}`, JSON.stringify(trialInfo));
                    
                    // Atualizar timestamp da √∫ltima atualiza√ß√£o na interface
                    const lastUpdateElement = document.getElementById('last-update');
                    if (lastUpdateElement) {
                        lastUpdateElement.textContent = new Date().toLocaleTimeString('pt-BR');
                    }
                    
                    console.log('Dados salvos com sucesso:', {
                        user: currentUser.email,
                        vendas: dataToSave.vendas.length,
                        funcionarios: dataToSave.funcionarios.length,
                        despesas: dataToSave.despesas.length,
                        estoque: dataToSave.estoque.length
                    });
                    
                } else {
                    console.warn('Tentativa de salvar dados sem usu√°rio logado');
                }
            } catch (error) {
                console.error('Erro ao salvar dados:', error);
                // Tentar salvar dados b√°sicos em caso de erro
                try {
                    if (currentUser && currentUser.email) {
                        const basicData = {
                            vendas: businessData.vendas || [],
                            funcionarios: businessData.funcionarios || [],
                            despesas: businessData.despesas || [],
                            estoque: businessData.estoque || [],
                            lastSaved: new Date().toISOString()
                        };
                        localStorage.setItem(`business_${currentUser.email}`, JSON.stringify(basicData));
                    }
                } catch (fallbackError) {
                    console.error('Erro cr√≠tico ao salvar dados:', fallbackError);
                }
            }
        }
        
        // Chart variables
        let currentChartPeriod = 5;
        let salesChart = null;
        let profitChart = null;
        
        // Plan limits and current plan
        let currentPlan = {
            name: 'Start',
            price: 'R$ 29,90',
            limit: 15000,
            color: 'blue'
        };
        
        let trialInfo = {
            isTrialActive: false,
            trialStartDate: null,
            trialEndDate: null,
            daysRemaining: 0,
            hasSubscribed: false
        };
        
        const planLimits = {
            start: { name: 'Start', price: 'R$ 29,90', limit: 15000, color: 'blue' },
            premium: { name: 'Premium', price: 'R$ 57,90', limit: 25000, color: 'purple' },
            gold: { name: 'Gold', price: 'R$ 117,90', limit: 50000, color: 'yellow' }
        };

        // Login functionality
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Check localStorage for registered users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                businessData = JSON.parse(localStorage.getItem(`business_${user.email}`) || '{"vendas":[],"funcionarios":[],"despesas":[],"estoque":[],"ultimaAtualizacaoEstoque":null,"config":{}}');
                businessData.config = user;
                loginSuccess();
            } else {
                alert('Email ou senha incorretos!');
            }
        });

        // Register functionality
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('reg-name').value.trim();
            const email = document.getElementById('reg-email').value.trim().toLowerCase();
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirm-password').value;
            const company = document.getElementById('reg-company').value.trim();
            const sector = document.getElementById('reg-sector').value;
            const employees = document.getElementById('reg-employees').value;
            
            // Valida√ß√µes
            if (!name || !email || !password || !company || !sector || !employees) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }
            
            if (password.length < 6) {
                alert('A senha deve ter pelo menos 6 caracteres!');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('As senhas n√£o coincidem!');
                return;
            }
            
            if (!email.includes('@') || !email.includes('.')) {
                alert('Por favor, insira um email v√°lido!');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.find(u => u.email === email)) {
                alert('Este email j√° est√° cadastrado!');
                return;
            }
            
            const newUser = {
                name,
                email,
                password,
                company,
                sector,
                employees: parseInt(employees),
                registrationDate: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            // Initialize business data
            const initialBusinessData = {
                vendas: [],
                funcionarios: [],
                despesas: [],
                estoque: [],
                ultimaAtualizacaoEstoque: null,
                config: newUser
            };
            localStorage.setItem(`business_${email}`, JSON.stringify(initialBusinessData));
            
            // Initialize 7-day free trial automatically
            const now = new Date();
            const trialEnd = new Date(now);
            trialEnd.setDate(trialEnd.getDate() + 7);
            
            const initialTrialInfo = {
                isTrialActive: true,
                trialStartDate: now.toISOString(),
                trialEndDate: trialEnd.toISOString(),
                daysRemaining: 7,
                hasSubscribed: false
            };
            
            localStorage.setItem(`trial_${email}`, JSON.stringify(initialTrialInfo));
            
            alert(`üéâ CONTA CRIADA COM SUCESSO!\n\n‚úÖ Seu teste gratuito de 7 dias come√ßou agora!\n‚úÖ Acesso completo ao plano Start\n‚úÖ Todos os recursos dispon√≠veis\n\nüìÖ Teste v√°lido at√©: ${trialEnd.toLocaleDateString('pt-BR')}\n\nFa√ßa login para come√ßar a gerenciar seu neg√≥cio!`);
            showLogin();
        });

        function showLogin() {
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('register-screen').classList.add('hidden');
        }

        function showRegister() {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('register-screen').classList.remove('hidden');
        }

        function loginSuccess() {
            try {
                console.log('Iniciando login para:', currentUser.email);
                
                // Esconder telas de login
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('register-screen').classList.add('hidden');
                
                // Verificar se usu√°rio tem plano pago
                const savedPlan = localStorage.getItem(`plan_${currentUser.email}`);
                const savedTrial = localStorage.getItem(`trial_${currentUser.email}`);
                
                // Carregar informa√ß√µes do trial se existir
                if (savedTrial) {
                    try {
                        trialInfo = JSON.parse(savedTrial);
                    } catch (e) {
                        console.error('Erro ao carregar trial info:', e);
                        trialInfo = {
                            isTrialActive: false,
                            trialStartDate: null,
                            trialEndDate: null,
                            daysRemaining: 0,
                            hasSubscribed: false
                        };
                    }
                } else {
                    // Usu√°rio antigo sem trial - criar trial autom√°tico
                    const now = new Date();
                    const trialEnd = new Date(now);
                    trialEnd.setDate(trialEnd.getDate() + 7);
                    
                    trialInfo = {
                        isTrialActive: true,
                        trialStartDate: now.toISOString(),
                        trialEndDate: trialEnd.toISOString(),
                        daysRemaining: 7,
                        hasSubscribed: false
                    };
                    
                    localStorage.setItem(`trial_${currentUser.email}`, JSON.stringify(trialInfo));
                }
                
                // Verificar se tem assinatura paga ativa
                if (savedPlan) {
                    // Usu√°rio tem assinatura ativa - acesso liberado
                    try {
                        currentPlan = JSON.parse(savedPlan);
                        trialInfo.hasSubscribed = true;
                        console.log('‚úÖ Usu√°rio com assinatura ativa:', currentPlan.name);
                    } catch (e) {
                        console.error('Erro ao carregar plano:', e);
                        currentPlan = { name: 'Start', price: 'R$ 29,90', limit: 15000, color: 'blue' };
                    }
                } else {
                    // Usu√°rio sem assinatura - verificar trial
                    if (trialInfo.isTrialActive) {
                        // Verificar se trial expirou
                        const now = new Date();
                        const trialEnd = new Date(trialInfo.trialEndDate);
                        
                        if (now > trialEnd) {
                            // Trial expirado - bloquear acesso
                            console.log('‚ùå Trial expirado - bloqueando acesso');
                            showTrialExpired();
                            return;
                        } else {
                            // Trial ainda ativo - permitir acesso
                            console.log('‚úÖ Trial ativo - acesso liberado');
                            updateTrialStatus();
                        }
                    } else {
                        // Sem trial ativo - bloquear acesso
                        console.log('‚ùå Sem trial ativo - bloqueando acesso');
                        showTrialExpired();
                        return;
                    }
                }
                
                // Carregar dados salvos do neg√≥cio
                const savedBusinessData = localStorage.getItem(`business_${currentUser.email}`);
                if (savedBusinessData) {
                    try {
                        businessData = JSON.parse(savedBusinessData);
                        
                        // Garantir que todos os arrays existem
                        if (!businessData.vendas) businessData.vendas = [];
                        if (!businessData.funcionarios) businessData.funcionarios = [];
                        if (!businessData.despesas) businessData.despesas = [];
                        if (!businessData.estoque) businessData.estoque = [];
                        if (!businessData.config) businessData.config = currentUser;
                        
                        console.log('Dados do neg√≥cio carregados:', {
                            vendas: businessData.vendas.length,
                            funcionarios: businessData.funcionarios.length,
                            despesas: businessData.despesas.length,
                            estoque: businessData.estoque.length
                        });
                        
                    } catch (e) {
                        console.error('Erro ao carregar dados do neg√≥cio:', e);
                        // Inicializar com dados vazios em caso de erro
                        businessData = {
                            vendas: [],
                            funcionarios: [],
                            despesas: [],
                            estoque: [],
                            ultimaAtualizacaoEstoque: null,
                            config: currentUser
                        };
                    }
                } else {
                    // Primeiro acesso - inicializar dados vazios
                    businessData = {
                        vendas: [],
                        funcionarios: [],
                        despesas: [],
                        estoque: [],
                        ultimaAtualizacaoEstoque: null,
                        config: currentUser
                    };
                }
                
                // Mostrar aplica√ß√£o principal
                document.getElementById('main-app').classList.remove('hidden');
                
                // Atualizar interface com dados do usu√°rio
                const updateUserInterface = () => {
                    const userNameEl = document.getElementById('user-name');
                    if (userNameEl) userNameEl.textContent = currentUser.name;
                    
                    const companyNameEl = document.getElementById('company-name');
                    if (companyNameEl) companyNameEl.textContent = 'MyBusinessNow';
                    
                    const userCompanyEl = document.getElementById('user-company');
                    if (userCompanyEl) userCompanyEl.textContent = currentUser.company;
                    
                    // Atualizar header mobile
                    const mobileCompanyNameEl = document.getElementById('mobile-company-name');
                    if (mobileCompanyNameEl) mobileCompanyNameEl.textContent = 'MyBusinessNow';
                    
                    const mobileUserInfoEl = document.getElementById('mobile-user-info');
                    if (mobileUserInfoEl) mobileUserInfoEl.textContent = currentUser.company;
                    
                    // Atualizar formul√°rio de configura√ß√µes
                    const configCompanyEl = document.getElementById('config-company');
                    if (configCompanyEl) configCompanyEl.value = currentUser.company || '';
                    
                    const configEmailEl = document.getElementById('config-email');
                    if (configEmailEl) configEmailEl.value = currentUser.email || '';
                    
                    const configSectorEl = document.getElementById('config-sector');
                    if (configSectorEl) configSectorEl.value = currentUser.sector || 'varejo';
                };
                
                updateUserInterface();
                
                // Atualizar display do plano
                updatePlanDisplay(currentPlan);
                
                // Carregar e atualizar todos os dados
                loadBusinessData();
                
                console.log('Login realizado com sucesso!');
                
            } catch (error) {
                console.error('Erro durante login:', error);
                alert('Erro ao carregar dados. Tente fazer login novamente.');
                logout();
            }
        }

        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            localStorage.setItem('darkTheme', isDarkTheme);
            
            if (isDarkTheme) {
                document.body.classList.add('dark');
                document.getElementById('theme-icon').textContent = '‚òÄÔ∏è';
                document.getElementById('theme-text').textContent = 'Claro';
            } else {
                document.body.classList.remove('dark');
                document.getElementById('theme-icon').textContent = 'üåô';
                document.getElementById('theme-text').textContent = 'Escuro';
            }
        }

        function logout() {
            if (confirm('Tem certeza que deseja sair?')) {
                try {
                    // Save data before logout
                    if (currentUser) {
                        localStorage.setItem(`business_${currentUser.email}`, JSON.stringify(businessData));
                    }
                    
                    // Reset all variables
                    currentUser = null;
                    businessData = { vendas: [], funcionarios: [], despesas: [], estoque: [], ultimaAtualizacaoEstoque: null, config: {} };
                    currentPlan = { name: 'Start', price: 'R$ 29,90', limit: 15000, color: 'blue' };
                    trialInfo = { isTrialActive: false, trialStartDate: null, trialEndDate: null, daysRemaining: 0, hasSubscribed: false };
                    
                    // Hide all screens and show login screen
                    document.getElementById('main-app').classList.add('hidden');
                    document.getElementById('plan-selection-screen').classList.add('hidden');
                    document.getElementById('trial-expired-screen').classList.add('hidden');
                    document.getElementById('login-screen').classList.remove('hidden');
                    
                    // Reset forms
                    document.getElementById('login-form').reset();
                    
                    // Clear any modals that might be open
                    const modals = ['add-employee-modal', 'add-estoque-modal', 'edit-estoque-modal', 'curso-modal'];
                    modals.forEach(modalId => {
                        const modal = document.getElementById(modalId);
                        if (modal) modal.classList.add('hidden');
                    });
                    
                    // Reset to dashboard page
                    setTimeout(() => showPage('dashboard'), 100);
                    
                } catch (error) {
                    console.error('Erro durante logout:', error);
                    // Force reload if there's an error
                    window.location.reload();
                }
            }
        }

        // Sales functionality
        document.getElementById('venda-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            try {
                const cliente = document.getElementById('venda-cliente').value.trim();
                const valor = parseFloat(document.getElementById('venda-valor').value);
                const metodo = document.getElementById('venda-metodo').value;
                const custo = parseFloat(document.getElementById('venda-custo').value) || 50;
                
                // Valida√ß√µes aprimoradas
                if (!cliente || cliente.length < 2) {
                    alert('‚ùå Por favor, informe o nome do cliente (m√≠nimo 2 caracteres)!');
                    document.getElementById('venda-cliente').focus();
                    return;
                }
                
                if (!valor || valor <= 0 || isNaN(valor)) {
                    alert('‚ùå Por favor, informe um valor v√°lido para a venda!');
                    document.getElementById('venda-valor').focus();
                    return;
                }
                
                if (valor > 1000000) {
                    alert('‚ùå Valor muito alto! M√°ximo permitido: R$ 1.000.000,00');
                    document.getElementById('venda-valor').focus();
                    return;
                }
                
                if (!metodo) {
                    alert('‚ùå Por favor, selecione o m√©todo de pagamento!');
                    document.getElementById('venda-metodo').focus();
                    return;
                }
                
                if (custo < 0 || custo > 100 || isNaN(custo)) {
                    alert('‚ùå O custo deve estar entre 0% e 100%!');
                    document.getElementById('venda-custo').focus();
                    return;
                }
                
                // Garantir que businessData.vendas existe
                if (!businessData.vendas) {
                    businessData.vendas = [];
                }
                
                // Criar objeto da venda
                const venda = {
                    id: Date.now(), // Usar timestamp para ID √∫nico
                    cliente: cliente,
                    valor: parseFloat(valor.toFixed(2)), // Garantir 2 casas decimais
                    metodo: metodo,
                    custo: parseFloat(custo.toFixed(2)),
                    data: new Date().toISOString(),
                    hora: new Date().toLocaleTimeString('pt-BR', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    })
                };
                
                // Adicionar venda ao array
                businessData.vendas.push(venda);
                
                // Limpar formul√°rio
                this.reset();
                
                // Salvar dados
                saveBusinessData();
                
                // Atualizar todas as interfaces
                updateVendasList();
                updateDashboard();
                generateAlerts();
                generatePerformanceAlerts();
                renderPerformanceCharts();
                
                // Feedback visual de sucesso
                const submitButton = this.querySelector('button[type="submit"]');
                const originalText = submitButton.innerHTML;
                submitButton.innerHTML = '‚úÖ Venda Registrada!';
                submitButton.style.backgroundColor = '#10b981';
                
                setTimeout(() => {
                    submitButton.innerHTML = originalText;
                    submitButton.style.backgroundColor = '';
                }, 2000);
                
                // Mostrar mensagem de sucesso
                alert(`‚úÖ VENDA REGISTRADA COM SUCESSO!\n\nüë§ Cliente: ${cliente}\nüí∞ Valor: R$ ${valor.toFixed(2)}\nüí≥ M√©todo: ${metodo}\nüìä Custo: ${custo}%\n‚è∞ Hor√°rio: ${venda.hora}\n\nüéâ Dados salvos automaticamente!`);
                
                // Scroll para o topo no mobile para ver o dashboard atualizado
                if (window.innerWidth <= 768) {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
                
                console.log('Venda registrada:', venda);
                
            } catch (error) {
                console.error('Erro ao registrar venda:', error);
                alert('‚ùå Erro ao registrar venda. Tente novamente.');
            }
        });

        // Employee functionality
        document.getElementById('employee-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('emp-name').value;
            
            const funcionario = {
                id: businessData.funcionarios.length + 1,
                name,
                status: Math.random() > 0.3 ? 'trabalhando' : 'folga'
            };
            
            businessData.funcionarios.push(funcionario);
            this.reset();
            hideAddEmployee();
            
            // Auto-save for real users
            saveBusinessData();
            
            updateFuncionariosList();
            updateDashboard();
            generateAlerts();
            generatePerformanceAlerts();
            renderPerformanceCharts();
            
            alert('Funcion√°rio adicionado com sucesso!');
        });

        // Expense functionality
        document.getElementById('despesa-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const desc = document.getElementById('despesa-desc').value;
            const valor = parseFloat(document.getElementById('despesa-valor').value);
            const categoria = document.getElementById('despesa-categoria').value;
            const tipo = document.getElementById('despesa-tipo').value;
            
            const despesa = {
                id: businessData.despesas.length + 1,
                desc,
                valor,
                categoria,
                tipo,
                data: new Date().toISOString()
            };
            
            businessData.despesas.push(despesa);
            this.reset();
            
            // Auto-save for real users
            saveBusinessData();
            
            updateDespesasList();
            updateDashboard();
            generateAlerts();
            generatePerformanceAlerts();
            renderPerformanceCharts();
            
            alert('Despesa adicionada com sucesso!');
        });

        // Estoque functionality
        document.getElementById('estoque-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const empresa = document.getElementById('estoque-empresa').value;
            const produto = document.getElementById('estoque-produto').value;
            
            // Initialize estoque array if it doesn't exist
            if (!businessData.estoque) {
                businessData.estoque = [];
            }
            
            const itemEstoque = {
                id: businessData.estoque.length + 1,
                empresa,
                produto,
                dataCadastro: new Date().toISOString()
            };
            
            businessData.estoque.push(itemEstoque);
            this.reset();
            hideAddEstoque();
            
            // Auto-save for real users
            saveBusinessData();
            
            updateEstoqueList();
            updateEstoqueResumo();
            generateAlerts();
            generatePerformanceAlerts();
            renderPerformanceCharts();
            
            alert('Item adicionado ao estoque com sucesso!');
        });

        document.getElementById('edit-estoque-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('edit-estoque-id').value);
            const empresa = document.getElementById('edit-estoque-empresa').value;
            const produto = document.getElementById('edit-estoque-produto').value;
            
            const estoqueIndex = businessData.estoque.findIndex(e => e.id === id);
            if (estoqueIndex !== -1) {
                businessData.estoque[estoqueIndex] = {
                    ...businessData.estoque[estoqueIndex],
                    empresa,
                    produto
                };
            }
            
            hideEditEstoque();
            
            // Auto-save for real users
            saveBusinessData();
            
            updateEstoqueList();
            updateEstoqueResumo();
            generateAlerts();
            generatePerformanceAlerts();
            renderPerformanceCharts();
            
            alert('Item do estoque atualizado com sucesso!');
        });

        // Config form
        document.getElementById('config-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const company = document.getElementById('config-company').value;
            const email = document.getElementById('config-email').value;
            const sector = document.getElementById('config-sector').value;
            
            currentUser.company = company;
            currentUser.email = email;
            currentUser.sector = sector;
            
            // Update business data config
            businessData.config = currentUser;
            
            // Auto-save for real users
            saveBusinessData();
            
            // Update users array
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const userIndex = users.findIndex(u => u.email === currentUser.email);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
            }
            
            document.getElementById('company-name').textContent = company;
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-company').textContent = company;
            
            alert('Configura√ß√µes salvas com sucesso!');
        });

        function showAddEmployee() {
            document.getElementById('add-employee-modal').classList.remove('hidden');
        }

        function hideAddEmployee() {
            document.getElementById('add-employee-modal').classList.add('hidden');
        }

        function showAddEstoque() {
            document.getElementById('add-estoque-modal').classList.remove('hidden');
        }

        function hideAddEstoque() {
            document.getElementById('add-estoque-modal').classList.add('hidden');
        }

        function showEditEstoque(id) {
            // Initialize estoque array if it doesn't exist
            if (!businessData.estoque) {
                businessData.estoque = [];
            }
            
            const item = businessData.estoque.find(e => e.id === id);
            if (item) {
                document.getElementById('edit-estoque-id').value = item.id;
                document.getElementById('edit-estoque-empresa').value = item.empresa;
                document.getElementById('edit-estoque-produto').value = item.produto || '';
                
                document.getElementById('edit-estoque-modal').classList.remove('hidden');
            }
        }

        function hideEditEstoque() {
            document.getElementById('edit-estoque-modal').classList.add('hidden');
        }

        function deleteEstoque(id) {
            if (confirm('Tem certeza que deseja excluir este item do estoque?')) {
                // Initialize estoque array if it doesn't exist
                if (!businessData.estoque) {
                    businessData.estoque = [];
                }
                
                businessData.estoque = businessData.estoque.filter(e => e.id !== id);
                
                // Auto-save for real users
                saveBusinessData();
                
                updateEstoqueList();
                updateEstoqueResumo();
                generateAlerts();
                generatePerformanceAlerts();
                renderPerformanceCharts();
                alert('Item do estoque exclu√≠do com sucesso!');
            }
        }

        function atualizarEstoque() {
            businessData.ultimaAtualizacaoEstoque = new Date().toISOString();
            
            // Auto-save for real users
            saveBusinessData();
            
            updateEstoqueResumo();
            generateAlerts();
            generatePerformanceAlerts();
            renderPerformanceCharts();
            alert('‚úÖ Estoque atualizado com sucesso!\n\nAgora voc√™ receber√° lembretes autom√°ticos:\n‚Ä¢ Aos 15 dias para verificar itens\n‚Ä¢ Aos 30 dias para nova atualiza√ß√£o completa');
        }



        function loadBusinessData() {
            try {
                console.log('Carregando dados do neg√≥cio...');
                
                // Garantir que todos os arrays existem
                if (!businessData.vendas) businessData.vendas = [];
                if (!businessData.funcionarios) businessData.funcionarios = [];
                if (!businessData.despesas) businessData.despesas = [];
                if (!businessData.estoque) businessData.estoque = [];
                
                // Atualizar todas as listas e interfaces
                updateVendasList();
                updateFuncionariosList();
                updateDespesasList();
                updateEstoqueList();
                updateEstoqueResumo();
                updateDashboard();
                generateAlerts();
                generatePerformanceAlerts();
                renderPerformanceCharts();
                
                console.log('Dados carregados com sucesso:', {
                    vendas: businessData.vendas.length,
                    funcionarios: businessData.funcionarios.length,
                    despesas: businessData.despesas.length,
                    estoque: businessData.estoque.length
                });
                
            } catch (error) {
                console.error('Erro ao carregar dados do neg√≥cio:', error);
                
                // Em caso de erro, inicializar com dados vazios
                businessData = {
                    vendas: [],
                    funcionarios: [],
                    despesas: [],
                    estoque: [],
                    ultimaAtualizacaoEstoque: null,
                    config: currentUser || {}
                };
                
                // Tentar atualizar interface mesmo com dados vazios
                try {
                    updateDashboard();
                    updateVendasList();
                    updateFuncionariosList();
                    updateDespesasList();
                    updateEstoqueList();
                    updateEstoqueResumo();
                } catch (interfaceError) {
                    console.error('Erro ao atualizar interface:', interfaceError);
                }
            }
        }



        function updateEstoqueList() {
            const container = document.getElementById('estoque-list');
            
            // Initialize estoque array if it doesn't exist
            if (!businessData.estoque) {
                businessData.estoque = [];
            }
            
            if (businessData.estoque.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum item cadastrado no estoque</p>';
            } else {
                container.innerHTML = businessData.estoque.map(item => {
                    return `
                        <div class="p-4 bg-gray-50 rounded-lg border">
                            <div class="flex items-center justify-between mb-3">
                                <h4 class="font-semibold text-gray-800 text-lg">${item.empresa}</h4>
                                <span class="px-3 py-1 rounded-full text-xs font-medium text-blue-600 bg-blue-100">Em Estoque</span>
                            </div>
                            
                            <div class="mb-4">
                                <div class="text-sm font-medium text-gray-700 mb-2">üì¶ Produto:</div>
                                <div class="text-sm text-gray-600 bg-white p-3 rounded border font-medium">
                                    ${item.produto}
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="text-sm text-gray-600">
                                    <strong>üìÖ Cadastrado em:</strong> ${new Date(item.dataCadastro).toLocaleDateString('pt-BR')}
                                </div>
                            </div>
                            
                            <div class="flex gap-2 justify-end">
                                <button onclick="showEditEstoque(${item.id})" class="px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition">
                                    Editar
                                </button>
                                <button onclick="deleteEstoque(${item.id})" class="px-4 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition">
                                    Excluir
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        }

        function updateEstoqueResumo() {
            // Initialize estoque array if it doesn't exist
            if (!businessData.estoque) {
                businessData.estoque = [];
            }
            
            const empresasUnicas = [...new Set(businessData.estoque.map(item => item.empresa))];
            const totalEmpresas = empresasUnicas.length;
            const totalProdutos = businessData.estoque.length;
            
            // √öltima atualiza√ß√£o
            let ultimaAtualizacao = 'Nunca';
            if (businessData.ultimaAtualizacaoEstoque) {
                const dataAtualizacao = new Date(businessData.ultimaAtualizacaoEstoque);
                ultimaAtualizacao = dataAtualizacao.toLocaleDateString('pt-BR');
            }
            
            document.getElementById('total-empresas-estoque').textContent = totalEmpresas;
            document.getElementById('total-produtos-estoque').textContent = totalProdutos;
            document.getElementById('ultima-atualizacao-estoque').textContent = ultimaAtualizacao;
        }

        function updateVendasList() {
            const tbody = document.getElementById('vendas-list');
            const mobileContainer = document.getElementById('vendas-list-mobile');
            const today = new Date().toDateString();
            
            // Garantir que businessData.vendas existe
            if (!businessData.vendas) {
                businessData.vendas = [];
            }
            
            const vendasHoje = businessData.vendas.filter(v => {
                try {
                    return new Date(v.data).toDateString() === today;
                } catch (e) {
                    return false;
                }
            });
            
            // Atualizar vers√£o desktop (tabela)
            if (tbody) {
                if (vendasHoje.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5" class="text-center py-4 text-gray-500">Nenhuma venda registrada hoje</td></tr>';
                } else {
                    tbody.innerHTML = vendasHoje.map(venda => `
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3 px-2 font-medium">#${venda.id}</td>
                            <td class="py-3 px-2">${venda.cliente}</td>
                            <td class="py-3 px-2 text-green-600 font-bold">R$ ${parseFloat(venda.valor).toFixed(2)}</td>
                            <td class="py-3 px-2 capitalize">${venda.metodo}</td>
                            <td class="py-3 px-2 text-sm text-gray-600">${venda.hora}</td>
                        </tr>
                    `).join('');
                }
            }
            
            // Atualizar vers√£o mobile (cards)
            if (mobileContainer) {
                if (vendasHoje.length === 0) {
                    mobileContainer.innerHTML = `
                        <div class="text-center py-8 text-gray-500 text-mobile-sm">
                            <div class="text-4xl mb-2">üí≥</div>
                            <p>Nenhuma venda registrada hoje</p>
                            <p class="text-xs mt-1">Use o formul√°rio abaixo para registrar</p>
                        </div>
                    `;
                } else {
                    mobileContainer.innerHTML = vendasHoje.map(venda => {
                        const metodosIcons = {
                            'dinheiro': 'üíµ',
                            'cartao': 'üí≥',
                            'pix': 'üì±',
                            'transferencia': 'üè¶'
                        };
                        
                        return `
                            <div class="list-item-mobile bg-white border border-gray-200 rounded-lg p-4 mb-3 shadow-sm hover:shadow-md transition-shadow">
                                <div class="flex justify-between items-start mb-3">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium">#${venda.id}</span>
                                            <span class="text-xs text-gray-500">${venda.hora}</span>
                                        </div>
                                        <h4 class="font-semibold text-gray-800 text-mobile">${venda.cliente}</h4>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-lg font-bold text-green-600">R$ ${parseFloat(venda.valor).toFixed(2)}</div>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between pt-2 border-t border-gray-100">
                                    <div class="flex items-center gap-2 text-mobile-sm text-gray-600">
                                        <span class="text-lg">${metodosIcons[venda.metodo] || 'üí≥'}</span>
                                        <span class="capitalize font-medium">${venda.metodo}</span>
                                    </div>
                                    <div class="text-mobile-sm text-gray-500 bg-gray-50 px-2 py-1 rounded">
                                        Custo: ${venda.custo || 50}%
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('');
                }
            }
            
            // Atualizar total de vendas do dia
            const totalVendas = vendasHoje.reduce((sum, v) => sum + parseFloat(v.valor || 0), 0);
            const totalVendasElement = document.getElementById('total-vendas-dia');
            if (totalVendasElement) {
                totalVendasElement.textContent = `R$ ${totalVendas.toFixed(2)}`;
            }
        }

        function updateFuncionariosList() {
            const container = document.getElementById('funcionarios-list');
            
            if (businessData.funcionarios.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhum funcion√°rio cadastrado</p>';
            } else {
                container.innerHTML = businessData.funcionarios.map(func => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded">
                        <div>
                            <span class="font-medium">${func.name}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="alterarStatus(${func.id}, 'trabalhando')" 
                                    class="px-3 py-1 rounded text-xs transition ${func.status === 'trabalhando' ? 'bg-green-600 text-white' : 'bg-gray-200 text-gray-600 hover:bg-green-100'}">
                                Trabalhando
                            </button>
                            <button onclick="alterarStatus(${func.id}, 'folga')" 
                                    class="px-3 py-1 rounded text-xs transition ${func.status === 'folga' ? 'bg-yellow-600 text-white' : 'bg-gray-200 text-gray-600 hover:bg-yellow-100'}">
                                Folga
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function alterarStatus(funcionarioId, novoStatus) {
            const funcionario = businessData.funcionarios.find(f => f.id === funcionarioId);
            if (funcionario) {
                funcionario.status = novoStatus;
                
                // Auto-save for real users
                saveBusinessData();
                
                updateFuncionariosList();
                updateDashboard();
                generateAlerts();
                generatePerformanceAlerts();
                renderPerformanceCharts();
            }
        }

        function updateDespesasList() {
            const container = document.getElementById('despesas-list');
            const thisMonth = new Date().getMonth();
            const despesasMes = businessData.despesas.filter(d => new Date(d.data).getMonth() === thisMonth);
            
            if (despesasMes.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma despesa registrada</p>';
            } else {
                container.innerHTML = despesasMes.map(despesa => `
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                        <div>
                            <span class="font-medium">${despesa.desc}</span>
                            <span class="text-xs text-gray-500 ml-2">${despesa.categoria}</span>
                        </div>
                        <span class="text-red-600 font-semibold">R$ ${despesa.valor.toFixed(2)}</span>
                    </div>
                `).join('');
            }
        }

        function updateDashboard() {
            try {
                const today = new Date().toDateString();
                const thisMonth = new Date().getMonth();
                const thisYear = new Date().getFullYear();
                
                // Garantir que arrays existem
                if (!businessData.vendas) businessData.vendas = [];
                if (!businessData.despesas) businessData.despesas = [];
                if (!businessData.funcionarios) businessData.funcionarios = [];
                
                // Vendas hoje
                const vendasHoje = businessData.vendas.filter(v => {
                    try {
                        return new Date(v.data).toDateString() === today;
                    } catch (e) {
                        return false;
                    }
                });
                
                const totalVendasHoje = vendasHoje.reduce((sum, v) => sum + (parseFloat(v.valor) || 0), 0);
                const custoVendasHoje = vendasHoje.reduce((sum, v) => {
                    const valor = parseFloat(v.valor) || 0;
                    const custo = parseFloat(v.custo) || 50;
                    return sum + (valor * (custo / 100));
                }, 0);
                
                // Despesas hoje
                const despesasHoje = businessData.despesas.filter(d => {
                    try {
                        return new Date(d.data).toDateString() === today;
                    } catch (e) {
                        return false;
                    }
                });
                const totalDespesasHoje = despesasHoje.reduce((sum, d) => sum + (parseFloat(d.valor) || 0), 0);
                
                // C√°lculos do dia
                const lucroHoje = totalVendasHoje - custoVendasHoje - totalDespesasHoje;
                const margemLucro = totalVendasHoje > 0 ? ((lucroHoje / totalVendasHoje) * 100) : 0;
                
                // Atualizar elementos do dashboard - verificar se existem antes de atualizar
                const updateElement = (id, value) => {
                    const element = document.getElementById(id);
                    if (element) element.textContent = value;
                };
                
                // Dashboard principal
                updateElement('vendas-hoje', `R$ ${totalVendasHoje.toFixed(2)}`);
                updateElement('vendas-count', `${vendasHoje.length} vendas registradas`);
                updateElement('despesas-hoje', `R$ ${totalDespesasHoje.toFixed(2)}`);
                updateElement('lucro-hoje', `R$ ${lucroHoje.toFixed(2)}`);
                updateElement('margem-lucro', `${margemLucro.toFixed(1)}% margem`);
                
                // Resumo financeiro detalhado
                updateElement('vendas-brutas', `R$ ${totalVendasHoje.toFixed(2)}`);
                updateElement('custo-produtos', `R$ ${custoVendasHoje.toFixed(2)}`);
                updateElement('despesas-operacionais', `R$ ${totalDespesasHoje.toFixed(2)}`);
                updateElement('lucro-liquido', `R$ ${lucroHoje.toFixed(2)}`);
                
                // Equipe
                const funcionariosTrabalhando = businessData.funcionarios.filter(f => f.status === 'trabalhando').length;
                const funcionariosFolga = businessData.funcionarios.filter(f => f.status === 'folga').length;
                
                updateElement('total-funcionarios', businessData.funcionarios.length.toString());
                updateElement('funcionarios-trabalhando', funcionariosTrabalhando.toString());
                updateElement('funcionarios-folga', funcionariosFolga.toString());
                
                // Financeiro mensal
                const vendasMes = businessData.vendas.filter(v => {
                    try {
                        const date = new Date(v.data);
                        return date.getMonth() === thisMonth && date.getFullYear() === thisYear;
                    } catch (e) {
                        return false;
                    }
                });
                
                const receitaBrutaMes = vendasMes.reduce((sum, v) => sum + (parseFloat(v.valor) || 0), 0);
                const custoMes = vendasMes.reduce((sum, v) => {
                    const valor = parseFloat(v.valor) || 0;
                    const custo = parseFloat(v.custo) || 50;
                    return sum + (valor * (custo / 100));
                }, 0);
                
                const despesasMes = businessData.despesas.filter(d => {
                    try {
                        const date = new Date(d.data);
                        return date.getMonth() === thisMonth && date.getFullYear() === thisYear;
                    } catch (e) {
                        return false;
                    }
                });
                
                const totalDespesasMes = despesasMes.reduce((sum, d) => sum + (parseFloat(d.valor) || 0), 0);
                const lucroLiquidoMes = receitaBrutaMes - custoMes - totalDespesasMes;
                const margemBruta = receitaBrutaMes > 0 ? ((lucroLiquidoMes / receitaBrutaMes) * 100) : 0;
                
                updateElement('receita-bruta-mes', `R$ ${receitaBrutaMes.toFixed(2)}`);
                updateElement('despesas-totais-mes', `R$ ${totalDespesasMes.toFixed(2)}`);
                updateElement('margem-bruta', `${margemBruta.toFixed(1)}%`);
                updateElement('lucro-liquido-mes', `R$ ${lucroLiquidoMes.toFixed(2)}`);
                
                // Verificar se precisa fazer upgrade autom√°tico baseado no lucro l√≠quido mensal
                checkAutoUpgrade(lucroLiquidoMes);
                
                // Atualizar timestamp da √∫ltima atualiza√ß√£o
                updateElement('last-update', new Date().toLocaleTimeString('pt-BR'));
                
                console.log('Dashboard atualizado com sucesso:', {
                    vendasHoje: vendasHoje.length,
                    totalVendasHoje: totalVendasHoje.toFixed(2),
                    lucroHoje: lucroHoje.toFixed(2),
                    funcionarios: businessData.funcionarios.length
                });
                
            } catch (error) {
                console.error('Erro ao atualizar dashboard:', error);
                
                // Em caso de erro, mostrar valores zerados de forma segura
                const elements = [
                    { id: 'vendas-hoje', value: 'R$ 0,00' },
                    { id: 'vendas-count', value: '0 vendas registradas' },
                    { id: 'despesas-hoje', value: 'R$ 0,00' },
                    { id: 'lucro-hoje', value: 'R$ 0,00' },
                    { id: 'margem-lucro', value: '0% margem' },
                    { id: 'vendas-brutas', value: 'R$ 0,00' },
                    { id: 'custo-produtos', value: 'R$ 0,00' },
                    { id: 'despesas-operacionais', value: 'R$ 0,00' },
                    { id: 'lucro-liquido', value: 'R$ 0,00' },
                    { id: 'total-funcionarios', value: '0' },
                    { id: 'funcionarios-trabalhando', value: '0' },
                    { id: 'funcionarios-folga', value: '0' },
                    { id: 'receita-bruta-mes', value: 'R$ 0,00' },
                    { id: 'despesas-totais-mes', value: 'R$ 0,00' },
                    { id: 'margem-bruta', value: '0%' },
                    { id: 'lucro-liquido-mes', value: 'R$ 0,00' }
                ];
                
                elements.forEach(({ id, value }) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = value;
                    }
                });
            }
        }
        
        function checkAutoUpgrade(lucroLiquidoMes) {
            
            let newPlan = null;
            
            // Verifica se ultrapassou o limite do plano atual baseado no lucro l√≠quido
            if (lucroLiquidoMes > currentPlan.limit) {
                if (currentPlan.name === 'Start' && lucroLiquidoMes <= planLimits.premium.limit) {
                    newPlan = planLimits.premium;
                } else if (currentPlan.name === 'Premium' && lucroLiquidoMes <= planLimits.gold.limit) {
                    newPlan = planLimits.gold;
                } else if (lucroLiquidoMes > planLimits.gold.limit) {
                    newPlan = planLimits.gold; // Gold √© o plano m√°ximo
                }
                
                if (newPlan && newPlan.name !== currentPlan.name) {
                    showAutoUpgradeNotification(newPlan, lucroLiquidoMes);
                }
            }
        }
        
        function showAutoUpgradeNotification(newPlan, lucroLiquido) {
            const message = `üöÄ PARAB√âNS! Seu neg√≥cio est√° crescendo!\n\nüí∞ Lucro L√≠quido Mensal: R$ ${lucroLiquido.toFixed(2)}\n\nüìà Voc√™ ultrapassou o limite do plano ${currentPlan.name} (R$ ${currentPlan.limit.toLocaleString('pt-BR')})\n\n‚ú® Upgrade autom√°tico para o plano ${newPlan.name}!\n\nNovo limite: R$ ${newPlan.limit.toLocaleString('pt-BR')}/m√™s\nValor: ${newPlan.price}/m√™s\n\nDeseja confirmar o upgrade?`;
            
            if (confirm(message)) {
                performAutoUpgrade(newPlan);
            }
        }
        
        function performAutoUpgrade(newPlan) {
            currentPlan = newPlan;
            
            // Atualizar interface do plano na sidebar
            updatePlanDisplay(newPlan);
            
            // Mostrar mensagem de sucesso
            alert(`üéâ UPGRADE REALIZADO COM SUCESSO!\n\n‚úÖ Plano atual: ${newPlan.name}\nüí≥ Valor: ${newPlan.price}/m√™s\nüìä Novo limite: R$ ${newPlan.limit.toLocaleString('pt-BR')}/m√™s\n\nüöÄ Agora voc√™ tem acesso a todos os recursos do plano ${newPlan.name}!\n\nContinue crescendo! üìà`);
            
            // Salvar o novo plano
            if (currentUser) {
                localStorage.setItem(`plan_${currentUser.email}`, JSON.stringify(currentPlan));
            }
        }
        
        function updatePlanDisplay(plan) {
            const sidebarPlan = document.getElementById('plan-info');
            
            // Check if user is in trial
            if (trialInfo.isTrialActive && !trialInfo.hasSubscribed) {
                sidebarPlan.innerHTML = `
                    <div class="text-sm font-medium text-orange-800">üéÅ <strong>Teste Gratuito</strong></div>
                    <div class="text-xs text-orange-600 mt-1">Plano Start - Gr√°tis</div>
                    <div class="text-xs text-orange-600">${trialInfo.daysRemaining} dias restantes</div>
                    <button onclick="showPage('planos')" class="mt-2 text-xs bg-orange-600 text-white px-2 py-1 rounded hover:bg-orange-700 transition">Assinar</button>
                `;
                sidebarPlan.className = `mt-6 p-3 bg-orange-50 rounded-lg border border-orange-200`;
            } else {
                sidebarPlan.innerHTML = `
                    <div class="text-sm font-medium text-${plan.color}-800">Plano Atual: <strong>${plan.name}</strong></div>
                    <div class="text-xs text-${plan.color}-600 mt-1">${plan.price}/m√™s</div>
                    <div class="text-xs text-${plan.color}-600">Limite: R$ ${plan.limit.toLocaleString('pt-BR')}/m√™s</div>
                    <button onclick="showPage('planos')" class="mt-2 text-xs bg-${plan.color}-600 text-white px-2 py-1 rounded hover:bg-${plan.color}-700 transition">Gerenciar</button>
                `;
                sidebarPlan.className = `mt-6 p-3 bg-${plan.color}-50 rounded-lg border border-${plan.color}-200`;
            }
            
            // Re-renderizar gr√°ficos quando o plano muda
            renderPerformanceCharts();
        }

        function generateAlerts() {
            const alertsContainer = document.getElementById('alertas-container');
            const alerts = [];
            
            // Check negative cash flow
            const today = new Date().toDateString();
            const vendasHoje = businessData.vendas.filter(v => new Date(v.data).toDateString() === today);
            const totalVendasHoje = vendasHoje.reduce((sum, v) => sum + v.valor, 0);
            const despesasHoje = businessData.despesas.filter(d => new Date(d.data).toDateString() === today);
            const totalDespesasHoje = despesasHoje.reduce((sum, d) => sum + d.valor, 0);
            const fluxoCaixa = totalVendasHoje - totalDespesasHoje;
            
            if (fluxoCaixa < 0) {
                alerts.push({
                    type: 'danger',
                    icon: '‚ö†Ô∏è',
                    title: 'Fluxo de Caixa Negativo',
                    message: `Fluxo negativo de R$ ${Math.abs(fluxoCaixa).toFixed(2)} hoje`
                });
            }
            
            // Check staff shortage
            const funcionariosFolga = businessData.funcionarios.filter(f => f.status === 'folga').length;
            const totalFuncionarios = businessData.funcionarios.length;
            
            if (funcionariosFolga > totalFuncionarios * 0.3) {
                alerts.push({
                    type: 'warning',
                    icon: 'üë•',
                    title: 'Muitos Funcion√°rios de Folga',
                    message: `${funcionariosFolga} funcion√°rios de folga hoje (${((funcionariosFolga/totalFuncionarios)*100).toFixed(0)}%)`
                });
            }
            
            // Check low sales
            if (totalVendasHoje < 1000 && vendasHoje.length < 5) {
                alerts.push({
                    type: 'warning',
                    icon: 'üìâ',
                    title: 'Vendas Baixas',
                    message: `Apenas ${vendasHoje.length} vendas hoje. Considere a√ß√µes de marketing.`
                });
            }
            
            // Check high expenses
            const thisMonth = new Date().getMonth();
            const vendasMes = businessData.vendas.filter(v => new Date(v.data).getMonth() === thisMonth);
            const receitaMes = vendasMes.reduce((sum, v) => sum + v.valor, 0);
            const despesasMes = businessData.despesas.filter(d => new Date(d.data).getMonth() === thisMonth);
            const totalDespesasMes = despesasMes.reduce((sum, d) => sum + d.valor, 0);
            
            if (totalDespesasMes > receitaMes * 0.7) {
                alerts.push({
                    type: 'warning',
                    icon: 'üí∞',
                    title: 'Despesas Altas',
                    message: `Despesas representam ${((totalDespesasMes/receitaMes)*100).toFixed(0)}% da receita`
                });
            }
            
            // Check stock update alerts
            if (businessData.ultimaAtualizacaoEstoque) {
                const ultimaAtualizacao = new Date(businessData.ultimaAtualizacaoEstoque);
                const hoje = new Date();
                const diasDesdeAtualizacao = Math.floor((hoje - ultimaAtualizacao) / (1000 * 60 * 60 * 24));
                
                if (diasDesdeAtualizacao >= 30) {
                    alerts.push({
                        type: 'danger',
                        icon: 'üì¶',
                        title: 'Estoque Precisa ser Atualizado!',
                        message: `Faz ${diasDesdeAtualizacao} dias que voc√™ n√£o atualiza seu estoque. √â hora de fazer uma verifica√ß√£o completa!`
                    });
                } else if (diasDesdeAtualizacao >= 15) {
                    alerts.push({
                        type: 'warning',
                        icon: 'üìã',
                        title: 'Verifica√ß√£o de Estoque Recomendada',
                        message: `Faz ${diasDesdeAtualizacao} dias que voc√™ atualizou seu estoque. Fa√ßa uma verifica√ß√£o se ainda tem todos os itens necess√°rios.`
                    });
                }
            } else if (businessData.estoque && businessData.estoque.length > 0) {
                alerts.push({
                    type: 'warning',
                    icon: 'üì¶',
                    title: 'Marque a Primeira Atualiza√ß√£o de Estoque',
                    message: 'Voc√™ tem itens cadastrados mas ainda n√£o marcou nenhuma atualiza√ß√£o de estoque. Clique no bot√£o verde na aba Estoque!'
                });
            }
            
            // Check if no stock items registered
            if (!businessData.estoque || businessData.estoque.length === 0) {
                alerts.push({
                    type: 'warning',
                    icon: 'üì¶',
                    title: 'Nenhum Item no Estoque',
                    message: 'Cadastre os itens do seu estoque para melhor controle do neg√≥cio'
                });
            }
            
            if (alerts.length === 0) {
                alertsContainer.innerHTML = `
                    <div class="p-4 rounded-lg bg-green-50 border border-green-200">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">‚úÖ</span>
                            <div>
                                <h4 class="font-semibold text-green-800">Tudo Certo!</h4>
                                <p class="text-green-700">N√£o h√° alertas no momento. Seu neg√≥cio est√° funcionando bem!</p>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                alertsContainer.innerHTML = alerts.map(alert => `
                    <div class="p-4 rounded-lg alert-${alert.type}">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">${alert.icon}</span>
                            <div>
                                <h4 class="font-semibold text-${alert.type === 'danger' ? 'red' : 'yellow'}-800">${alert.title}</h4>
                                <p class="text-${alert.type === 'danger' ? 'red' : 'yellow'}-700">${alert.message}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        function generatePerformanceAlerts() {
            const alertsContainer = document.getElementById('performance-alerts');
            const alerts = [];
            
            // Comparar vendas do m√™s atual com m√™s anterior
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;
            const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;
            
            const vendasMesAtual = businessData.vendas.filter(v => {
                const date = new Date(v.data);
                return date.getMonth() === currentMonth && date.getFullYear() === currentYear;
            });
            
            const vendasMesAnterior = businessData.vendas.filter(v => {
                const date = new Date(v.data);
                return date.getMonth() === lastMonth && date.getFullYear() === lastMonthYear;
            });
            
            const totalMesAtual = vendasMesAtual.reduce((sum, v) => sum + v.valor, 0);
            const totalMesAnterior = vendasMesAnterior.reduce((sum, v) => sum + v.valor, 0);
            
            if (totalMesAnterior > 0) {
                const percentualMudanca = ((totalMesAtual - totalMesAnterior) / totalMesAnterior) * 100;
                
                if (percentualMudanca > 10) {
                    alerts.push({
                        type: 'success',
                        icon: 'üöÄ',
                        title: 'PARAB√âNS, GRANDE EMPRES√ÅRIO!',
                        message: `Este m√™s voc√™ vendeu ${percentualMudanca.toFixed(1)}% mais que no m√™s anterior! De R$ ${totalMesAnterior.toFixed(2)} para R$ ${totalMesAtual.toFixed(2)}. Continue assim! üí™`
                    });
                } else if (percentualMudanca > 0) {
                    alerts.push({
                        type: 'success',
                        icon: 'üìà',
                        title: 'Crescimento Positivo!',
                        message: `Suas vendas cresceram ${percentualMudanca.toFixed(1)}% em rela√ß√£o ao m√™s anterior. √ìtimo trabalho! Continue focado! üéØ`
                    });
                } else if (percentualMudanca < -10) {
                    alerts.push({
                        type: 'warning',
                        icon: 'üí™',
                        title: 'N√£o Desanime, Continue Progredindo!',
                        message: `Este m√™s as vendas ca√≠ram ${Math.abs(percentualMudanca).toFixed(1)}%, mas isso √© normal nos neg√≥cios. Analise o que pode melhorar e volte mais forte! Todo empres√°rio passa por isso. üåü`
                    });
                } else if (percentualMudanca < 0) {
                    alerts.push({
                        type: 'info',
                        icon: 'üéØ',
                        title: 'Pequena Queda, Grande Oportunidade!',
                        message: `Vendas ${Math.abs(percentualMudanca).toFixed(1)}% menores que o m√™s anterior. √â hora de revisar estrat√©gias e buscar novos clientes. Voc√™ consegue! üí°`
                    });
                }
            }
            
            // Alerta de crescimento semanal
            const ultimaSemana = businessData.vendas.filter(v => {
                const date = new Date(v.data);
                const hoje = new Date();
                const diasAtras = Math.floor((hoje - date) / (1000 * 60 * 60 * 24));
                return diasAtras <= 7;
            });
            
            const semanaAnterior = businessData.vendas.filter(v => {
                const date = new Date(v.data);
                const hoje = new Date();
                const diasAtras = Math.floor((hoje - date) / (1000 * 60 * 60 * 24));
                return diasAtras > 7 && diasAtras <= 14;
            });
            
            const totalUltimaSemana = ultimaSemana.reduce((sum, v) => sum + v.valor, 0);
            const totalSemanaAnterior = semanaAnterior.reduce((sum, v) => sum + v.valor, 0);
            
            if (totalSemanaAnterior > 0) {
                const percentualSemanal = ((totalUltimaSemana - totalSemanaAnterior) / totalSemanaAnterior) * 100;
                
                if (percentualSemanal > 20) {
                    alerts.push({
                        type: 'success',
                        icon: '‚ö°',
                        title: 'Semana Explosiva!',
                        message: `√öltima semana foi ${percentualSemanal.toFixed(1)}% melhor que a anterior! Voc√™ est√° no caminho certo! üî•`
                    });
                }
            }
            
            // Alerta de ticket m√©dio
            if (vendasMesAtual.length > 0 && vendasMesAnterior.length > 0) {
                const ticketMedioAtual = totalMesAtual / vendasMesAtual.length;
                const ticketMedioAnterior = totalMesAnterior / vendasMesAnterior.length;
                const percentualTicket = ((ticketMedioAtual - ticketMedioAnterior) / ticketMedioAnterior) * 100;
                
                if (percentualTicket > 15) {
                    alerts.push({
                        type: 'success',
                        icon: 'üíé',
                        title: 'Ticket M√©dio em Alta!',
                        message: `Seu ticket m√©dio aumentou ${percentualTicket.toFixed(1)}%! De R$ ${ticketMedioAnterior.toFixed(2)} para R$ ${ticketMedioAtual.toFixed(2)}. Excelente estrat√©gia! üí∞`
                    });
                }
            }
            
            if (alerts.length === 0) {
                alertsContainer.innerHTML = `
                    <div class="p-4 rounded-lg bg-blue-50 border border-blue-200">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">üìä</span>
                            <div>
                                <h4 class="font-semibold text-blue-800">An√°lise de Desempenho</h4>
                                <p class="text-blue-700">Continue registrando vendas para receber an√°lises comparativas detalhadas!</p>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                alertsContainer.innerHTML = alerts.map(alert => `
                    <div class="p-4 rounded-lg ${alert.type === 'success' ? 'bg-green-50 border-green-200' : alert.type === 'warning' ? 'bg-yellow-50 border-yellow-200' : 'bg-blue-50 border-blue-200'} border">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">${alert.icon}</span>
                            <div>
                                <h4 class="font-bold text-lg ${alert.type === 'success' ? 'text-green-800' : alert.type === 'warning' ? 'text-yellow-800' : 'text-blue-800'}">${alert.title}</h4>
                                <p class="${alert.type === 'success' ? 'text-green-700' : alert.type === 'warning' ? 'text-yellow-700' : 'text-blue-700'}">${alert.message}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        function generateSampleData() {
            // Gerar dados de exemplo para demonstra√ß√£o dos gr√°ficos
            const today = new Date();
            const sampleData = [];
            
            for (let i = 30; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                
                // Simular vendas com varia√ß√£o realista
                const baseValue = 500 + Math.random() * 1000;
                const weekendMultiplier = date.getDay() === 0 || date.getDay() === 6 ? 1.3 : 1;
                const monthTrend = 1 + (30 - i) * 0.01; // Tend√™ncia de crescimento
                
                const vendas = baseValue * weekendMultiplier * monthTrend + (Math.random() - 0.5) * 200;
                const custo = vendas * (0.4 + Math.random() * 0.2); // 40-60% de custo
                const lucro = vendas - custo;
                
                sampleData.push({
                    data: date.toISOString(),
                    valor: Math.max(0, vendas),
                    custo: 50,
                    cliente: `Cliente ${i}`,
                    metodo: ['dinheiro', 'cartao', 'pix'][Math.floor(Math.random() * 3)],
                    hora: '12:00'
                });
            }
            
            return sampleData;
        }

        function getChartData(period) {
            let vendas = businessData.vendas;
            
            // Se n√£o h√° dados suficientes, usar dados de exemplo
            if (vendas.length < 5) {
                vendas = generateSampleData();
            }
            
            const today = new Date();
            const startDate = new Date(today);
            startDate.setDate(startDate.getDate() - period);
            
            // Filtrar vendas do per√≠odo
            const vendasPeriodo = vendas.filter(v => {
                const vendaDate = new Date(v.data);
                return vendaDate >= startDate && vendaDate <= today;
            });
            
            // Agrupar por dia
            const dadosPorDia = {};
            for (let i = 0; i < period; i++) {
                const date = new Date(startDate);
                date.setDate(date.getDate() + i);
                const dateStr = date.toISOString().split('T')[0];
                dadosPorDia[dateStr] = { vendas: 0, lucro: 0, transacoes: 0 };
            }
            
            vendasPeriodo.forEach(venda => {
                const dateStr = new Date(venda.data).toISOString().split('T')[0];
                if (dadosPorDia[dateStr]) {
                    dadosPorDia[dateStr].vendas += venda.valor;
                    dadosPorDia[dateStr].lucro += venda.valor * (1 - (venda.custo / 100));
                    dadosPorDia[dateStr].transacoes += 1;
                }
            });
            
            return dadosPorDia;
        }

        function drawChart(canvasId, data, color, label) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Responsive canvas sizing
            const container = canvas.parentElement;
            const containerWidth = container.clientWidth;
            const isMobile = window.innerWidth <= 768;
            
            // Set canvas size based on container and device
            canvas.width = Math.min(containerWidth - 20, isMobile ? 350 : 400);
            canvas.height = isMobile ? 150 : 200;
            
            // Limpar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const values = Object.values(data);
            const dates = Object.keys(data);
            
            if (values.length === 0) return;
            
            const maxValue = Math.max(...values);
            const minValue = Math.min(...values);
            const range = maxValue - minValue || 1;
            
            const padding = isMobile ? 30 : 40;
            const chartWidth = canvas.width - padding * 2;
            const chartHeight = canvas.height - padding * 2;
            
            // Desenhar eixos
            ctx.strokeStyle = '#e5e7eb';
            ctx.lineWidth = 1;
            
            // Eixo Y
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.stroke();
            
            // Eixo X
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.stroke();
            
            // Desenhar linha do gr√°fico
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            values.forEach((value, index) => {
                const x = padding + (index * chartWidth) / (values.length - 1);
                const y = canvas.height - padding - ((value - minValue) / range) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            
            ctx.stroke();
            
            // Desenhar pontos
            ctx.fillStyle = color;
            values.forEach((value, index) => {
                const x = padding + (index * chartWidth) / (values.length - 1);
                const y = canvas.height - padding - ((value - minValue) / range) * chartHeight;
                
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // Labels dos valores
            ctx.fillStyle = '#6b7280';
            ctx.font = isMobile ? '10px Arial' : '12px Arial';
            ctx.textAlign = 'center';
            
            // Mostrar apenas alguns labels para n√£o poluir (menos no mobile)
            const labelStep = Math.ceil(values.length / (isMobile ? 3 : 5));
            values.forEach((value, index) => {
                if (index % labelStep === 0) {
                    const x = padding + (index * chartWidth) / (values.length - 1);
                    const date = new Date(dates[index]);
                    const label = `${date.getDate()}/${date.getMonth() + 1}`;
                    ctx.fillText(label, x, canvas.height - (isMobile ? 5 : 10));
                }
            });
        }
        
        // Update charts on window resize
        function handleChartResize() {
            if (currentPlan.name !== 'Start') {
                setTimeout(() => {
                    updateCharts();
                }, 100);
            }
        }

        function renderPerformanceCharts() {
            const chartsSection = document.getElementById('performance-charts-section');
            
            // Verificar se o usu√°rio tem acesso aos gr√°ficos (Premium ou Gold)
            if (currentPlan.name === 'Start') {
                // Mostrar tela de bloqueio para plano Start
                chartsSection.innerHTML = `
                    <div class="text-center py-12">
                        <div class="mb-6">
                            <div class="text-6xl mb-4">üîí</div>
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Gr√°ficos de Desempenho</h3>
                            <p class="text-gray-600 mb-6">Recurso exclusivo para planos Premium e Gold</p>
                        </div>
                        
                        <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-lg border border-purple-200 mb-6 max-w-md mx-auto">
                            <h4 class="font-semibold text-purple-800 mb-3">üöÄ Desbloqueie agora:</h4>
                            <ul class="text-left text-sm text-purple-700 space-y-2">
                                <li>üìä Gr√°ficos de vendas e lucro</li>
                                <li>üìà An√°lise de tend√™ncias</li>
                                <li>üìÖ Per√≠odos de 5, 15 e 30 dias</li>
                                <li>üìã Estat√≠sticas avan√ßadas</li>
                                <li>üíé Compara√ß√µes de desempenho</li>
                            </ul>
                        </div>
                        
                        <button onclick="showPage('planos')" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition">
                            üíé Fazer Upgrade Agora
                        </button>
                        
                        <div class="mt-4 text-sm text-gray-500">
                            üí° <strong>Dica:</strong> Com os gr√°ficos voc√™ pode identificar padr√µes de vendas e otimizar seu neg√≥cio
                        </div>
                    </div>
                `;
            } else {
                // Mostrar gr√°ficos completos para Premium e Gold
                chartsSection.innerHTML = `
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">üìä Gr√°ficos de Desempenho</h3>
                        <div class="flex gap-2">
                            <button onclick="changeChartPeriod(5)" id="chart-5d" class="px-3 py-1 rounded text-sm bg-blue-600 text-white">5 Dias</button>
                            <button onclick="changeChartPeriod(15)" id="chart-15d" class="px-3 py-1 rounded text-sm bg-gray-200 text-gray-700">15 Dias</button>
                            <button onclick="changeChartPeriod(30)" id="chart-30d" class="px-3 py-1 rounded text-sm bg-gray-200 text-gray-700">30 Dias</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Gr√°fico de Vendas -->
                        <div>
                            <h4 class="font-semibold mb-4 text-green-700">üí∞ Evolu√ß√£o das Vendas</h4>
                            <div class="relative">
                                <canvas id="sales-chart" width="400" height="200" class="border rounded"></canvas>
                            </div>
                            <div class="mt-2 text-center">
                                <span class="text-sm text-gray-600" id="sales-trend">Carregando tend√™ncia...</span>
                            </div>
                        </div>
                        
                        <!-- Gr√°fico de Lucro -->
                        <div>
                            <h4 class="font-semibold mb-4 text-purple-700">üíé Evolu√ß√£o do Lucro</h4>
                            <div class="relative">
                                <canvas id="profit-chart" width="400" height="200" class="border rounded"></canvas>
                            </div>
                            <div class="mt-2 text-center">
                                <span class="text-sm text-gray-600" id="profit-trend">Carregando tend√™ncia...</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Estat√≠sticas do Per√≠odo -->
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-600" id="period-sales">R$ 0</div>
                            <div class="text-sm text-green-700">Total Vendas</div>
                            <div class="text-xs text-green-600" id="period-sales-change">--</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-purple-600" id="period-profit">R$ 0</div>
                            <div class="text-sm text-purple-700">Total Lucro</div>
                            <div class="text-xs text-purple-600" id="period-profit-change">--</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-600" id="period-avg-ticket">R$ 0</div>
                            <div class="text-sm text-blue-700">Ticket M√©dio</div>
                            <div class="text-xs text-blue-600" id="period-avg-change">--</div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-orange-600" id="period-transactions">0</div>
                            <div class="text-sm text-orange-700">Transa√ß√µes</div>
                            <div class="text-xs text-orange-600" id="period-transactions-change">--</div>
                        </div>
                    </div>
                `;
                
                // Renderizar os gr√°ficos ap√≥s criar o HTML
                setTimeout(() => {
                    updateCharts();
                }, 100);
            }
        }

        function updateCharts() {
            // S√≥ atualizar se os elementos existirem (plano Premium/Gold)
            if (!document.getElementById('sales-chart')) return;
            
            const data = getChartData(currentChartPeriod);
            
            // Dados para os gr√°ficos
            const salesData = {};
            const profitData = {};
            
            Object.keys(data).forEach(date => {
                salesData[date] = data[date].vendas;
                profitData[date] = data[date].lucro;
            });
            
            // Desenhar gr√°ficos
            drawChart('sales-chart', salesData, '#10b981', 'Vendas');
            drawChart('profit-chart', profitData, '#8b5cf6', 'Lucro');
            
            // Calcular estat√≠sticas do per√≠odo
            const totalSales = Object.values(salesData).reduce((sum, val) => sum + val, 0);
            const totalProfit = Object.values(profitData).reduce((sum, val) => sum + val, 0);
            const totalTransactions = Object.values(data).reduce((sum, day) => sum + day.transacoes, 0);
            const avgTicket = totalTransactions > 0 ? totalSales / totalTransactions : 0;
            
            // Atualizar estat√≠sticas
            document.getElementById('period-sales').textContent = `R$ ${totalSales.toFixed(0)}`;
            document.getElementById('period-profit').textContent = `R$ ${totalProfit.toFixed(0)}`;
            document.getElementById('period-avg-ticket').textContent = `R$ ${avgTicket.toFixed(0)}`;
            document.getElementById('period-transactions').textContent = totalTransactions;
            
            // Calcular tend√™ncias
            const salesValues = Object.values(salesData);
            const profitValues = Object.values(profitData);
            
            if (salesValues.length > 1) {
                const salesTrend = salesValues[salesValues.length - 1] > salesValues[0] ? 'crescimento' : 'queda';
                const profitTrend = profitValues[profitValues.length - 1] > profitValues[0] ? 'crescimento' : 'queda';
                
                document.getElementById('sales-trend').textContent = `Tend√™ncia de ${salesTrend} no per√≠odo`;
                document.getElementById('profit-trend').textContent = `Tend√™ncia de ${profitTrend} no per√≠odo`;
                
                // Calcular percentuais de mudan√ßa
                const salesChange = salesValues.length > 1 ? 
                    ((salesValues[salesValues.length - 1] - salesValues[0]) / (salesValues[0] || 1)) * 100 : 0;
                const profitChange = profitValues.length > 1 ? 
                    ((profitValues[profitValues.length - 1] - profitValues[0]) / (profitValues[0] || 1)) * 100 : 0;
                
                document.getElementById('period-sales-change').textContent = 
                    `${salesChange > 0 ? '+' : ''}${salesChange.toFixed(1)}% no per√≠odo`;
                document.getElementById('period-profit-change').textContent = 
                    `${profitChange > 0 ? '+' : ''}${profitChange.toFixed(1)}% no per√≠odo`;
                
                // Calcular mudan√ßas para ticket m√©dio e transa√ß√µes (compara√ß√£o simples)
                document.getElementById('period-avg-change').textContent = `M√©dia do per√≠odo`;
                document.getElementById('period-transactions-change').textContent = `Total do per√≠odo`;
            }
        }

        function changeChartPeriod(period) {
            currentChartPeriod = period;
            
            // Atualizar bot√µes
            document.querySelectorAll('[id^="chart-"]').forEach(btn => {
                btn.className = 'px-3 py-1 rounded text-sm bg-gray-200 text-gray-700';
            });
            document.getElementById(`chart-${period}d`).className = 'px-3 py-1 rounded text-sm bg-blue-600 text-white';
            
            // Atualizar gr√°ficos
            updateCharts();
        }

        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => page.classList.add('hidden'));
            
            // Show selected page
            document.getElementById(pageId + '-page').classList.remove('hidden');
            
            // Update desktop navigation buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.classList.remove('bg-white', 'shadow');
                if (btn.dataset.page === pageId) {
                    btn.classList.add('bg-white', 'shadow');
                }
            });
            
            // Update mobile navigation buttons
            const mobileNavButtons = document.querySelectorAll('.mobile-nav-btn');
            mobileNavButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.page === pageId) {
                    btn.classList.add('active');
                }
            });
            
            // Update page title
            const pageTitle = document.getElementById('page-title');
            if (pageTitle) {
                pageTitle.textContent = pageId.charAt(0).toUpperCase() + pageId.slice(1);
            }
            
            // Update last update time
            const lastUpdate = document.getElementById('last-update');
            if (lastUpdate) {
                lastUpdate.textContent = new Date().toLocaleTimeString('pt-BR');
            }
            
            // Special handling for support page
            if (pageId === 'suporte') {
                renderWhatsAppSupport();
            }
            
            // Auto-save for real users when changing pages
            saveBusinessData();
        }

        function renderWhatsAppSupport() {
            const whatsappContainer = document.getElementById('whatsapp-support-content');
            
            if (currentPlan.name === 'Gold') {
                // Usu√°rio Gold tem acesso ao WhatsApp
                whatsappContainer.innerHTML = `
                    <div class="space-y-4">
                        <div class="bg-green-50 p-4 rounded-lg">
                            <h4 class="font-semibold text-green-800 mb-2">üí¨ Suporte VIP com o CEO:</h4>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>‚úÖ Acesso direto ao Fundador/CEO</li>
                                <li>‚úÖ Resposta imediata e personalizada</li>
                                <li>‚úÖ Consultoria estrat√©gica de neg√≥cios</li>
                                <li>‚úÖ Atendimento executivo exclusivo</li>
                                <li>‚úÖ Resolu√ß√£o priorit√°ria de problemas</li>
                            </ul>
                        </div>
                        
                        <div class="text-center">
                            <p class="text-sm text-gray-600 mb-3">WhatsApp direto com o Fundador/CEO:</p>
                            <div class="bg-green-100 p-3 rounded-lg mb-4">
                                <p class="font-mono text-sm font-semibold text-green-800">WhatsApp Direto com o CEO</p>
                                <p class="text-xs text-green-600 mt-1">Acesso VIP - Exclusivo para clientes Gold</p>
                            </div>
                            
                            <button onclick="abrirWhatsAppSupport()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-medium mb-3">
                                üí¨ Falar com o CEO
                            </button>
                            
                            <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                                <p class="text-xs text-yellow-700">
                                    <strong>üëë VIP:</strong> Voc√™ ter√° acesso direto ao CEO para consultoria estrat√©gica
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Usu√°rios Start e Premium n√£o t√™m acesso
                whatsappContainer.innerHTML = `
                    <div class="text-center py-8">
                        <div class="mb-4">
                            <div class="text-5xl mb-3">üîí</div>
                            <h4 class="text-lg font-bold text-gray-700 mb-2">Recurso Exclusivo</h4>
                            <p class="text-gray-600 mb-4">Suporte via WhatsApp dispon√≠vel apenas no plano Gold</p>
                        </div>
                        
                        <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-200 mb-4">
                            <h5 class="font-semibold text-yellow-800 mb-2">üöÄ Upgrade para Gold e tenha:</h5>
                            <ul class="text-sm text-yellow-700 space-y-1">
                                <li>üí¨ WhatsApp direto com especialistas</li>
                                <li>‚ö° Resposta imediata</li>
                                <li>üéØ Consultoria de neg√≥cios</li>
                                <li>üëë Atendimento VIP</li>
                            </ul>
                        </div>
                        
                        <button onclick="showPage('planos')" class="bg-gradient-to-r from-yellow-600 to-orange-600 text-white px-6 py-3 rounded-lg hover:from-yellow-700 hover:to-orange-700 transition font-medium">
                            üëë Fazer Upgrade para Gold
                        </button>
                        
                        <div class="mt-4 text-xs text-gray-500">
                            Enquanto isso, voc√™ pode usar nosso suporte por email üìß
                        </div>
                    </div>
                `;
            }
        }

        function abrirWhatsAppSupport() {
            const whatsappUrl = 'https://wa.me/?text=Ol%C3%A1!%20PRECISO%20DE%20SUPORTE';
            
            // Abrir WhatsApp diretamente
            window.open(whatsappUrl, '_blank');
        }

        function abrirEmailSuport() {
            const subject = `Suporte MyBusinessNow - ${currentUser.name} (${currentPlan.name})`;
            const body = `Ol√° equipe MyBusinessNow!

Preciso de suporte com minha conta.

üìä INFORMA√á√ïES DA CONTA:
‚Ä¢ Nome: ${currentUser.name}
‚Ä¢ Empresa: ${currentUser.company}
‚Ä¢ Email: ${currentUser.email}
‚Ä¢ Plano atual: ${currentPlan.name}
‚Ä¢ Data: ${new Date().toLocaleDateString('pt-BR')}

üéØ DESCRI√á√ÉO DO PROBLEMA:
[Descreva aqui seu problema ou d√∫vida]

üìã PASSOS J√Å TENTADOS:
[Liste o que j√° tentou fazer para resolver]

‚ö° URG√äNCIA:
[ ] Baixa - Posso aguardar at√© 24h
[ ] M√©dia - Preciso de resposta hoje
[ ] Alta - Problema cr√≠tico no neg√≥cio

Aguardo retorno!

Atenciosamente,
${currentUser.name}
${currentUser.company}`;

            // Criar URL do Gmail com compose
            const gmailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=mybusinessnowempresa@gmail.com&su=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            // Abrir Gmail diretamente
            window.open(gmailUrl, '_blank');
        }

        function upgradePlan(planType) {
            const newPlan = planLimits[planType];
            
            // Links de pagamento do Mercado Pago
            const paymentLinks = {
                start: 'https://mpago.la/2j4iFxW',
                premium: 'https://mpago.la/24SymYU',
                gold: 'https://mpago.la/1qKD78y'
            };
            
            const message = `üöÄ Confirma o upgrade para o plano ${newPlan.name}?\n\nValor: ${newPlan.price}/m√™s\nLimite de lucro l√≠quido: R$ ${newPlan.limit.toLocaleString('pt-BR')}/m√™s\n\nVoc√™ ser√° redirecionado para o pagamento seguro do Mercado Pago.\n\nConfirma o upgrade?`;
            
            if (confirm(message)) {
                // Salvar dados do usu√°rio antes de redirecionar
                if (currentUser) {
                    localStorage.setItem(`pending_upgrade_${currentUser.email}`, JSON.stringify({
                        currentPlan: currentPlan,
                        newPlan: newPlan,
                        timestamp: new Date().toISOString(),
                        user: currentUser
                    }));
                }
                
                // Redirecionar para o pagamento
                window.open(paymentLinks[planType], '_blank');
                
                // Mostrar mensagem de instru√ß√£o
                setTimeout(() => {
                    alert(`üí≥ UPGRADE EM ANDAMENTO\n\n‚úÖ Redirecionando para pagamento seguro\n‚úÖ Mercado Pago - 100% protegido\n‚úÖ Ap√≥s pagamento, volte aqui para ativar\n\nüöÄ Recursos que voc√™ vai desbloquear:\n${newPlan.name === 'Premium' || newPlan.name === 'Gold' ? 'üìä Gr√°ficos de Desempenho\nüìà An√°lise Avan√ßada\nüìã Relat√≥rios Detalhados' : ''}\n${newPlan.name === 'Gold' ? '\nüí¨ Suporte via WhatsApp\nüëë Atendimento VIP' : ''}\n\nüí° Mantenha esta aba aberta!`);
                }, 1000);
            }
        }

        // Cursos functionality
        const cursosData = {
            vendas: {
                title: "üí∞ Vendas de Alto Impacto",
                description: "Domine as t√©cnicas mais avan√ßadas de vendas e multiplique seus resultados",
                dicas: [
                    "üéØ Sempre pergunte antes de apresentar seu produto - descubra a real necessidade",
                    "ü§ù Construa relacionamento antes de vender - pessoas compram de quem confiam",
                    "üí° Foque nos benef√≠cios, n√£o nas caracter√≠sticas - mostre o que resolve na vida dele",
                    "‚è∞ Crie senso de urg√™ncia de forma √©tica - oferta limitada real, n√£o falsa",
                    "üëÇ Escute 70% do tempo, fale apenas 30% - o cliente te d√° todas as respostas",
                    "üì± Use WhatsApp para follow-up - 90% das pessoas checam WhatsApp todo dia",
                    "üí∞ Sempre apresente 3 op√ß√µes de pre√ßo - b√°sico, intermedi√°rio e premium",
                    "üéÅ Ofere√ßa b√¥nus que n√£o custam nada para voc√™ - consultoria, garantia estendida"
                ],
                estrategias: [
                    {
                        titulo: "üî• T√©cnica do Espelho",
                        descricao: "Repita as √∫ltimas 3 palavras que o cliente falou como pergunta. Exemplo: Cliente: 'Est√° muito caro' - Voc√™: 'Muito caro?' - Ele vai explicar e voc√™ descobre a real obje√ß√£o."
                    },
                    {
                        titulo: "üíé Regra dos 3 SIMs",
                        descricao: "Fa√ßa 3 perguntas que o cliente responda SIM antes de apresentar o pre√ßo. Exemplo: 'Voc√™ quer economizar tempo?' 'Quer ter mais qualidade?' 'Quer garantia?' - Depois apresente."
                    },
                    {
                        titulo: "‚ö° Fechamento Assumido",
                        descricao: "N√£o pergunte SE ele quer comprar, pergunte COMO ele prefere pagar. 'Voc√™ prefere √† vista ou parcelado?' - Assume que ele j√° decidiu comprar."
                    },
                    {
                        titulo: "üéØ T√©cnica do Sil√™ncio",
                        descricao: "Ap√≥s apresentar o pre√ßo, CALE A BOCA. Quem falar primeiro perde. O cliente vai processar e dar a resposta. N√£o tenha medo do sil√™ncio."
                    }
                ],
                canaisYoutube: [
                    { nome: "Wendell Carvalho", link: "https://youtube.com/@wendellcarvalho", descricao: "Maior especialista em vendas do Brasil" },
                    { nome: "Thiago Finch", link: "https://youtube.com/@thiagofinch", descricao: "T√©cnicas de vendas e persuas√£o" },
                    { nome: "Rodrigo Cohen", link: "https://youtube.com/@rodrigocohen", descricao: "Vendas e empreendedorismo" }
                ]
            },
            captacao: {
                title: "üéØ Capta√ß√£o de Clientes",
                description: "Aprenda a atrair e conquistar novos clientes de forma consistente",
                dicas: [
                    "üì± Poste conte√∫do de valor 3x por semana - dicas, bastidores, resultados de clientes",
                    "üéÅ Ofere√ßa algo gr√°tis primeiro - ebook, consultoria de 15min, diagn√≥stico gratuito",
                    "üìß Email marketing tem ROI de 4200% - colete emails e envie newsletter semanal",
                    "üó£Ô∏è Indica√ß√µes convertem 5x mais - crie programa de indica√ß√£o com recompensa",
                    "üéØ Defina seu cliente ideal - idade, renda, problemas, onde ele est√° online",
                    "üí¨ Responda TODOS os coment√°rios em at√© 2 horas - engajamento gera algoritmo",
                    "üìû Ligue para leads em at√© 5 minutos - 80% dos concorrentes n√£o fazem isso",
                    "ü§ù Fa√ßa parcerias com neg√≥cios complementares - troca de indica√ß√µes"
                ],
                estrategias: [
                    {
                        titulo: "üöÄ Funil de Conte√∫do",
                        descricao: "Topo: Dicas gerais (80%) | Meio: Cases de sucesso (15%) | Fundo: Ofertas diretas (5%). Exemplo: 'Como economizar' ‚Üí 'Cliente economizou R$5mil' ‚Üí 'Quer economizar tamb√©m?'"
                    },
                    {
                        titulo: "üì± Stories que Vendem",
                        descricao: "Use a f√≥rmula PAS: Problema (mostre a dor), Agita√ß√£o (intensifique), Solu√ß√£o (apresente seu produto). Sempre termine com CTA: 'Manda DM que te explico'"
                    },
                    {
                        titulo: "üéØ Isca Digital",
                        descricao: "Crie um material gratuito irresist√≠vel. Exemplo: 'Planilha que aumenta vendas em 30%' - Colete email e WhatsApp para entregar. 70% v√£o comprar depois."
                    },
                    {
                        titulo: "üî• Gatilho da Escassez",
                        descricao: "Limite real de vagas/tempo. 'S√≥ atendo 10 clientes por m√™s' ou 'Promo√ß√£o at√© sexta'. Escassez real gera urg√™ncia, falsa gera desconfian√ßa."
                    }
                ],
                canaisYoutube: [
                    { nome: "Erico Rocha", link: "https://youtube.com/@ericorocha", descricao: "Marketing digital e funis de venda" },
                    { nome: "Alex Vargas", link: "https://youtube.com/@alexvargas", descricao: "Prospec√ß√£o e vendas digitais" },
                    { nome: "Camila Porto", link: "https://youtube.com/@camilaporto", descricao: "Instagram e redes sociais para neg√≥cios" }
                ]
            },
            negociacao: {
                title: "ü§ù Negocia√ß√£o Avan√ßada",
                description: "Negocie como um profissional e obtenha melhores acordos",
                dicas: [
                    "üëÇ Escute 80% do tempo, fale 20% - quem fala mais perde poder na negocia√ß√£o",
                    "üéØ Sempre tenha 3 op√ß√µes preparadas - m√≠nimo, ideal e m√°ximo que aceita",
                    "ü§ù Busque o ganha-ganha real - cliente satisfeito vira cliente recorrente",
                    "üòå Nunca negocie com raiva ou pressa - emocional sempre perde",
                    "üí∞ Comece sempre 30% acima do que quer receber - deixe espa√ßo para 'ceder'",
                    "üïê Use o tempo a seu favor - 'Preciso pensar at√© amanh√£' cria press√£o",
                    "üé≠ Seja o 'bonzinho' da negocia√ß√£o - deixe o cliente se sentir esperto",
                    "üìã Coloque tudo no papel - acordo verbal n√£o vale nada"
                ],
                estrategias: [
                    {
                        titulo: "üéØ T√©cnica do √Çncora",
                        descricao: "Sempre fale seu pre√ßo primeiro e alto. Exemplo: 'Normalmente cobro R$5mil, mas para voc√™...' - O c√©rebro dele vai ancorar nos R$5mil e qualquer valor menor parecer√° barato."
                    },
                    {
                        titulo: "ü§î Poder da Pausa",
                        descricao: "Ap√≥s ele fazer uma proposta baixa, PAUSE por 5 segundos, suspire e diga: 'Vou ver o que posso fazer...' - Ele vai se sentir culpado e melhorar a oferta."
                    },
                    {
                        titulo: "üé≠ T√©cnica do Terceiro",
                        descricao: "'Vou ter que consultar meu s√≥cio/contador' - Cria a impress√£o que voc√™ n√£o decide sozinho e ganha tempo para pensar. Sempre funciona."
                    },
                    {
                        titulo: "üíé Concess√£o Condicional",
                        descricao: "Nunca d√™ desconto de gra√ßa. 'Posso fazer por R$X, MAS voc√™ precisa pagar √† vista e fechar hoje' - Toda concess√£o tem que ter contrapartida."
                    }
                ],
                canaisYoutube: [
                    { nome: "Paulo Vieira", link: "https://youtube.com/@paulovieira", descricao: "Persuas√£o e comunica√ß√£o" },
                    { nome: "Metaforando", link: "https://youtube.com/@metaforando", descricao: "Linguagem corporal e comportamento" },
                    { nome: "Fl√°vio Augusto", link: "https://youtube.com/@flavioaugusto", descricao: "Neg√≥cios e empreendedorismo" }
                ]
            },
            lideranca: {
                title: "üëë Lideran√ßa Executiva",
                description: "Desenvolva habilidades de lideran√ßa para equipes de alta performance",
                dicas: [
                    "üë• Lidere pelo exemplo - chegue primeiro, saia por √∫ltimo, fa√ßa o que pede",
                    "üéØ Metas SMART - espec√≠ficas, mensur√°veis, ating√≠veis, relevantes, temporais",
                    "üí¨ Feedback semanal individual - 15min com cada funcion√°rio toda semana",
                    "üå± Invista 10% do sal√°rio em treinamento - funcion√°rio capacitado produz mais",
                    "üèÜ Reconhe√ßa publicamente, critique em particular - nunca humilhe na frente dos outros",
                    "üí∞ Compartilhe resultados financeiros - equipe engajada sabe como est√° a empresa",
                    "üéâ Comemore pequenas vit√≥rias - motiva√ß√£o vem de conquistas frequentes",
                    "üö™ Tenha pol√≠tica de portas abertas - funcion√°rio precisa se sentir ouvido"
                ],
                estrategias: [
                    {
                        titulo: "‚ö° Regra dos 5 Minutos",
                        descricao: "Todo problema que chega at√© voc√™, d√™ 5 minutos para o funcion√°rio apresentar uma solu√ß√£o. N√£o resolva para ele, ensine ele a resolver. L√≠der que resolve tudo vira gargalo."
                    },
                    {
                        titulo: "üéØ OKRs Simples",
                        descricao: "Objective (objetivo) + Key Results (resultados-chave). Exemplo: Objetivo: 'Aumentar vendas' | KR1: '20 leads/semana' | KR2: 'Convers√£o de 15%' | KR3: 'Ticket m√©dio R$500'"
                    },
                    {
                        titulo: "üîÑ Reuni√£o de 15min",
                        descricao: "Segunda-feira, 15min em p√©: 1) O que fez semana passada 2) O que vai fazer essa semana 3) Que ajuda precisa. Sem reuni√£o de 2 horas que n√£o resolve nada."
                    },
                    {
                        titulo: "üíé Delega√ß√£o Eficaz",
                        descricao: "F√≥rmula: O QUE fazer + QUANDO entregar + COMO medir sucesso. Exemplo: 'Organize estoque (O QUE) at√© sexta (QUANDO) com 100% dos itens catalogados (COMO)'"
                    }
                ],
                canaisYoutube: [
                    { nome: "Jos√© Roberto Marques", link: "https://youtube.com/@jrmcoaching", descricao: "Lideran√ßa e coaching executivo" },
                    { nome: "Geronimo Theml", link: "https://youtube.com/@geronimotheml", descricao: "Gest√£o de pessoas e lideran√ßa" },
                    { nome: "Reinaldo Passadori", link: "https://youtube.com/@reinaldopassadori", descricao: "Comunica√ß√£o e orat√≥ria" }
                ]
            },
            mentalidade: {
                title: "üß† Mentalidade de Sucesso",
                description: "Desenvolva a mentalidade de um empreendedor de sucesso",
                dicas: [
                    "üöÄ Pense grande, comece pequeno - sonhe com milh√µes, comece com centenas",
                    "üí™ Fracasso √© feedback - cada 'n√£o' te aproxima do 'sim'",
                    "‚è∞ Acorde 1h mais cedo - essa hora extra vale ouro para planejar o dia",
                    "üéØ Foque em 3 coisas por dia - quem faz tudo n√£o faz nada bem feito",
                    "üìö Leia 30min por dia - conhecimento √© o √∫nico investimento que sempre rende",
                    "üèÉ Exercite-se 20min/dia - mente s√£ em corpo s√£o n√£o √© clich√™",
                    "üí∞ Viva com 70% do que ganha - os outros 30% s√£o para investir no neg√≥cio",
                    "ü§ù Cerque-se de pessoas melhores que voc√™ - voc√™ vira a m√©dia dos 5 mais pr√≥ximos"
                ],
                estrategias: [
                    {
                        titulo: "üéØ Regra dos 90 Dias",
                        descricao: "Defina 1 meta grande para 90 dias e trabalhe nela TODO DIA. Exemplo: 'Faturar R$50mil em 90 dias' = R$555/dia. Quebre em a√ß√µes di√°rias e execute sem falhar."
                    },
                    {
                        titulo: "üß† Visualiza√ß√£o Di√°ria",
                        descricao: "Todo dia ao acordar, visualize por 5min seu objetivo j√° conquistado. Como voc√™ se sente? O que mudou? Onde est√°? O c√©rebro n√£o diferencia real de imaginado."
                    },
                    {
                        titulo: "üìù Di√°rio de Gratid√£o",
                        descricao: "Antes de dormir, escreva 3 coisas boas do dia. C√©rebro grato √© c√©rebro pr√≥spero. Foque no que tem, n√£o no que falta. Abund√¢ncia atrai abund√¢ncia."
                    },
                    {
                        titulo: "‚ö° Zona de Desconforto",
                        descricao: "Fa√ßa 1 coisa que te d√° medo por semana. Ligue para aquele cliente grande, pe√ßa aquele desconto, fa√ßa aquela apresenta√ß√£o. Coragem se treina fazendo."
                    }
                ],
                canaisYoutube: [
                    { nome: "Nando Pinheiro", link: "https://youtube.com/@nandopinheiro", descricao: "Mentalidade e motiva√ß√£o" },
                    { nome: "Christian Barbosa", link: "https://youtube.com/@christianbarbosa", descricao: "Produtividade e gest√£o do tempo" },
                    { nome: "Augusto Cury", link: "https://youtube.com/@augustocury", descricao: "Intelig√™ncia emocional e psicologia" }
                ]
            },
            crescimento: {
                title: "üìà Crescimento Empresarial",
                description: "Estrat√©gias para escalar seu neg√≥cio de forma sustent√°vel",
                dicas: [
                    "üìä Me√ßa tudo - receita por cliente, custo de aquisi√ß√£o, lifetime value",
                    "üîÑ Automatize o que se repete - use sistemas, n√£o dependa s√≥ de pessoas",
                    "üë• Contrate devagar, demita r√°pido - erro de contrata√ß√£o custa caro",
                    "üí∞ Reinvista 30% do lucro - 70% para voc√™, 30% para crescer",
                    "üéØ Foque em 1 nicho primeiro - seja o melhor em algo espec√≠fico",
                    "üì± Digitalize processos - papel √© coisa do passado",
                    "ü§ù Fa√ßa parcerias estrat√©gicas - crescer sozinho √© mais lento",
                    "üìà Cres√ßa 20% por m√™s - meta agressiva mas poss√≠vel"
                ],
                estrategias: [
                    {
                        titulo: "üöÄ Modelo de Franquia",
                        descricao: "Documente TODOS os processos como se fosse franquear. Receita, atendimento, vendas, tudo no papel. Assim qualquer pessoa pode executar igual a voc√™. Escalabilidade real."
                    },
                    {
                        titulo: "üíé Regra 80/20",
                        descricao: "80% do lucro vem de 20% dos clientes. Identifique esses 20% e foque neles. Pare de perder tempo com cliente que d√° pouco retorno. Foque nos que pagam bem."
                    },
                    {
                        titulo: "üîÑ Sistema de Indica√ß√£o",
                        descricao: "Cliente satisfeito indica 3 pessoas. Crie sistema: 'A cada 3 indica√ß√µes que virarem clientes, voc√™ ganha 1 m√™s gr√°tis'. Crescimento org√¢nico √© o mais barato."
                    },
                    {
                        titulo: "üìä Dashboard de M√©tricas",
                        descricao: "Acompanhe diariamente: Leads, Convers√£o, Ticket M√©dio, CAC (Custo de Aquisi√ß√£o), LTV (Lifetime Value). Se n√£o mede, n√£o gerencia. Se n√£o gerencia, n√£o cresce."
                    }
                ],
                canaisYoutube: [
                    { nome: "Carlos Wizard", link: "https://youtube.com/@carloswizard", descricao: "Empreendedorismo e franquias" },
                    { nome: "Gustavo Cerbasi", link: "https://youtube.com/@gustavocerbasi", descricao: "Educa√ß√£o financeira e investimentos" },
                    { nome: "Beto Sicupira", link: "https://youtube.com/@betosicupira", descricao: "Estrat√©gia empresarial" }
                ]
            }
        };

        function abrirCurso(cursoId) {
            const curso = cursosData[cursoId];
            if (!curso) return;

            document.getElementById('curso-title').textContent = curso.title;
            
            const content = document.getElementById('curso-content');
            content.innerHTML = `
                <div class="mb-6">
                    <p class="text-lg text-gray-600">${curso.description}</p>
                </div>
                
                <!-- Cards de Dicas Pr√°ticas -->
                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">üí° Dicas Pr√°ticas que Funcionam:</h4>
                    <div class="grid grid-cols-1 gap-3">
                        ${curso.dicas.map(dica => `
                            <div class="bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg border border-green-200">
                                <p class="text-sm font-medium text-gray-800">${dica}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <!-- Estrat√©gias Avan√ßadas -->
                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">üöÄ Estrat√©gias Avan√ßadas:</h4>
                    <div class="space-y-4">
                        ${curso.estrategias.map(estrategia => `
                            <div class="bg-white border-l-4 border-purple-500 p-6 rounded-lg shadow-sm">
                                <h5 class="font-bold text-lg text-purple-800 mb-3">${estrategia.titulo}</h5>
                                <p class="text-gray-700 leading-relaxed">${estrategia.descricao}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <!-- Canais do YouTube Recomendados -->
                <div class="mb-8">
                    <h4 class="text-xl font-semibold mb-4">üì∫ Canais Recomendados no YouTube:</h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${curso.canaisYoutube.map(canal => `
                            <div class="bg-red-50 border border-red-200 p-4 rounded-lg">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-red-600 text-xl">üì∫</span>
                                    <h5 class="font-semibold text-red-800">${canal.nome}</h5>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">${canal.descricao}</p>
                                <a href="${canal.link}" target="_blank" class="inline-block bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition">
                                    Visitar Canal
                                </a>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <!-- Bot√£o de Download PDF -->
                <div class="mb-8 text-center">
                    <div class="bg-gradient-to-r from-orange-500 to-red-500 text-white p-6 rounded-lg">
                        <h4 class="text-xl font-bold mb-2">üìÑ Material Completo em PDF</h4>
                        <p class="mb-4">Baixe o guia completo com todas as dicas, estrat√©gias e links para estudar offline!</p>
                        <button onclick="baixarPDF('${cursoId}')" class="bg-white text-orange-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
                            üì• Baixar PDF Gratuito
                        </button>
                    </div>
                </div>
                
                <div class="mt-8 p-6 bg-green-50 rounded-lg border border-green-200">
                    <h4 class="font-semibold text-green-800 mb-2">üéØ Com este conte√∫do voc√™ ser√° capaz de:</h4>
                    <ul class="text-green-700 space-y-1">
                        <li>‚úÖ Aplicar t√©cnicas comprovadas no seu neg√≥cio</li>
                        <li>‚úÖ Obter resultados mensur√°veis em 30 dias</li>
                        <li>‚úÖ Superar seus concorrentes com estrat√©gias avan√ßadas</li>
                        <li>‚úÖ Aumentar significativamente sua receita</li>
                        <li>‚úÖ Ter acesso aos melhores canais do YouTube sobre o tema</li>
                    </ul>
                </div>
                
                <div class="mt-6 text-center">
                    <button onclick="comprarCurso('${cursoId}')" class="bg-green-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-green-700 transition">
                        üí≥ Comprar Curso Completo
                    </button>
                </div>
            `;
            
            document.getElementById('curso-modal').classList.remove('hidden');
        }

        function fecharCurso() {
            document.getElementById('curso-modal').classList.add('hidden');
        }

        function baixarPDF(cursoId) {
            const curso = cursosData[cursoId];
            if (!curso) return;
            
            // Criar conte√∫do do PDF
            let pdfContent = `${curso.title}\n`;
            pdfContent += `${'='.repeat(curso.title.length)}\n\n`;
            pdfContent += `${curso.description}\n\n`;
            
            pdfContent += `üí° DICAS PR√ÅTICAS QUE FUNCIONAM:\n`;
            pdfContent += `${'='.repeat(35)}\n\n`;
            curso.dicas.forEach((dica, index) => {
                pdfContent += `${index + 1}. ${dica}\n\n`;
            });
            
            pdfContent += `üöÄ ESTRAT√âGIAS AVAN√áADAS:\n`;
            pdfContent += `${'='.repeat(25)}\n\n`;
            curso.estrategias.forEach((estrategia, index) => {
                pdfContent += `${index + 1}. ${estrategia.titulo}\n`;
                pdfContent += `${estrategia.descricao}\n\n`;
            });
            
            pdfContent += `üì∫ CANAIS RECOMENDADOS NO YOUTUBE:\n`;
            pdfContent += `${'='.repeat(35)}\n\n`;
            curso.canaisYoutube.forEach((canal, index) => {
                pdfContent += `${index + 1}. ${canal.nome}\n`;
                pdfContent += `   Descri√ß√£o: ${canal.descricao}\n`;
                pdfContent += `   Link: ${canal.link}\n\n`;
            });
            
            pdfContent += `\n${'='.repeat(50)}\n`;
            pdfContent += `MyBusinessNow - Gest√£o Empresarial Inteligente\n`;
            pdfContent += `Gerado em: ${new Date().toLocaleDateString('pt-BR')}\n`;
            pdfContent += `${'='.repeat(50)}`;
            
            // Criar e baixar arquivo
            const blob = new Blob([pdfContent], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${curso.title.replace(/[^a-zA-Z0-9]/g, '_')}_Guia_Completo.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            alert(`üì• Download iniciado!\n\nO arquivo "${curso.title} - Guia Completo.txt" foi baixado com sucesso!\n\nAgora voc√™ pode estudar offline com todas as dicas, estrat√©gias e links dos canais recomendados.`);
        }

        function comprarCurso(cursoId) {
            const curso = cursosData[cursoId];
            const message = `Confirma a compra do curso "${curso.title}"?\n\nEste √© um sistema de demonstra√ß√£o. Em uma vers√£o real, voc√™ seria redirecionado para o pagamento.`;
            
            if (confirm(message)) {
                alert('üéâ Parab√©ns! Compra realizada com sucesso!\n\nVoc√™ agora tem acesso completo ao curso. Em uma vers√£o real, voc√™ receberia acesso imediato ao conte√∫do.');
                fecharCurso();
            }
        }

        function comprarPacoteVIP() {
            const message = `üèÜ Confirma a compra do Pacote Completo VIP?\n\nTodos os 6 cursos + Mentoria Exclusiva\nPor apenas R$ 997\n\nEste √© um sistema de demonstra√ß√£o.`;
            
            if (confirm(message)) {
                alert('üöÄ INCR√çVEL! Compra do Pacote VIP realizada!\n\n‚úÖ Acesso a todos os 6 cursos\n‚úÖ 3 sess√µes de mentoria\n‚úÖ Grupo VIP no WhatsApp\n‚úÖ B√¥nus exclusivos\n\nEm uma vers√£o real, voc√™ receberia acesso imediato a todo o conte√∫do!');
            }
        }

        function showPlanSelection() {
            document.getElementById('plan-selection-screen').classList.remove('hidden');
        }

        function selectPlan(planType) {
            const selectedPlan = planLimits[planType];
            
            // Links de pagamento do Mercado Pago
            const paymentLinks = {
                start: 'https://mpago.la/2j4iFxW',
                premium: 'https://mpago.la/24SymYU',
                gold: 'https://mpago.la/1qKD78y'
            };
            
            const message = `üéâ Excelente escolha!\n\nPlano selecionado: ${selectedPlan.name}\nValor: ${selectedPlan.price}/m√™s\nLimite: R$ ${selectedPlan.limit.toLocaleString('pt-BR')}/m√™s\n\n‚úÖ 7 dias gr√°tis para testar\n‚úÖ Cancele a qualquer momento\n\nVoc√™ ser√° redirecionado para o pagamento seguro do Mercado Pago.\n\nConfirma?`;
            
            if (confirm(message)) {
                // Salvar dados do usu√°rio antes de redirecionar
                if (currentUser) {
                    localStorage.setItem(`pending_plan_${currentUser.email}`, JSON.stringify({
                        plan: selectedPlan,
                        timestamp: new Date().toISOString(),
                        user: currentUser
                    }));
                }
                
                // Redirecionar para o pagamento
                window.open(paymentLinks[planType], '_blank');
                
                // Mostrar mensagem de instru√ß√£o
                setTimeout(() => {
                    alert(`üí≥ REDIRECIONAMENTO PARA PAGAMENTO\n\n‚úÖ Voc√™ ser√° direcionado para o Mercado Pago\n‚úÖ Pagamento 100% seguro e protegido\n‚úÖ Ap√≥s o pagamento, volte aqui para ativar sua conta\n\nüìß Voc√™ receber√° um email de confirma√ß√£o\nüîê Seus dados est√£o seguros conosco\n\nüí° Dica: Mantenha esta aba aberta para retornar ap√≥s o pagamento!`);
                }, 1000);
            }
        }



        // Password visibility toggle function
        function togglePasswordVisibility(inputId, eyeId) {
            const passwordInput = document.getElementById(inputId);
            const eyeIcon = document.getElementById(eyeId);
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.textContent = 'üôà';
                eyeIcon.title = 'Ocultar senha';
            } else {
                passwordInput.type = 'password';
                eyeIcon.textContent = 'üëÅÔ∏è';
                eyeIcon.title = 'Mostrar senha';
            }
        }

        // Auto-save every 30 seconds for real users
        setInterval(() => {
            saveBusinessData();
        }, 30000);
        
        // Save data before page unload for real users
        window.addEventListener('beforeunload', function(e) {
            saveBusinessData();
        });
        
        // Trial management functions
        function startFreeTrial() {
            const now = new Date();
            const trialEnd = new Date(now);
            trialEnd.setDate(trialEnd.getDate() + 7);
            
            trialInfo = {
                isTrialActive: true,
                trialStartDate: now.toISOString(),
                trialEndDate: trialEnd.toISOString(),
                daysRemaining: 7,
                hasSubscribed: false
            };
            
            // Save trial info
            saveBusinessData();
            
            // Show welcome message
            setTimeout(() => {
                alert(`üéâ BEM-VINDO AO MYBUSINESSNOW!\n\n‚úÖ Seu teste gratuito de 7 dias come√ßou agora!\n‚úÖ Acesso completo ao plano Start\n‚úÖ Todos os recursos dispon√≠veis\n‚úÖ Seus dados ser√£o salvos automaticamente\n\nüìÖ Teste v√°lido at√©: ${trialEnd.toLocaleDateString('pt-BR')}\n\nComece agora mesmo a gerenciar seu neg√≥cio!`);
            }, 1000);
        }
        
        function updateTrialStatus() {
            if (!trialInfo.isTrialActive) return;
            
            const now = new Date();
            const trialEnd = new Date(trialInfo.trialEndDate);
            const timeDiff = trialEnd.getTime() - now.getTime();
            const daysRemaining = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            trialInfo.daysRemaining = Math.max(0, daysRemaining);
            
            // Save updated trial info
            saveBusinessData();
            
            // Update display
            updatePlanDisplay(currentPlan);
            
            // Show reminder if trial is ending soon
            if (daysRemaining <= 2 && daysRemaining > 0) {
                setTimeout(() => {
                    alert(`‚è∞ LEMBRETE IMPORTANTE!\n\nSeu teste gratuito expira em ${daysRemaining} dia${daysRemaining > 1 ? 's' : ''}!\n\n‚úÖ Todos os seus dados est√£o seguros\n‚úÖ Assine um plano para continuar usando\n‚úÖ Acesso imediato ap√≥s assinatura\n\nN√£o perca o acesso ao seu neg√≥cio!`);
                }, 2000);
            }
        }
        
        function showTrialExpired() {
            // Load business data to show counts
            const savedBusinessData = localStorage.getItem(`business_${currentUser.email}`);
            if (savedBusinessData) {
                try {
                    businessData = JSON.parse(savedBusinessData);
                } catch (e) {
                    console.error('Erro ao carregar dados do neg√≥cio:', e);
                    businessData = { vendas: [], funcionarios: [], despesas: [], estoque: [] };
                }
            }
            
            // Update trial expired screen with data counts
            document.getElementById('trial-vendas-count').textContent = businessData.vendas?.length || 0;
            document.getElementById('trial-funcionarios-count').textContent = businessData.funcionarios?.length || 0;
            document.getElementById('trial-despesas-count').textContent = businessData.despesas?.length || 0;
            document.getElementById('trial-estoque-count').textContent = businessData.estoque?.length || 0;
            
            // Show trial expired screen
            document.getElementById('trial-expired-screen').classList.remove('hidden');
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('register-screen').classList.add('hidden');
            document.getElementById('main-app').classList.add('hidden');
            document.getElementById('plan-selection-screen').classList.add('hidden');
            
            console.log('üîí Tela de trial expirado exibida');
        }
        
        function subscribeFromTrial(planType) {
            const selectedPlan = planLimits[planType];
            
            // Links de pagamento do Mercado Pago
            const paymentLinks = {
                start: 'https://mpago.la/2j4iFxW',
                premium: 'https://mpago.la/24SymYU',
                gold: 'https://mpago.la/1qKD78y'
            };
            
            const message = `üéâ EXCELENTE ESCOLHA!\n\nPlano selecionado: ${selectedPlan.name}\nValor: ${selectedPlan.price}/m√™s\nLimite: R$ ${selectedPlan.limit.toLocaleString('pt-BR')}/m√™s\n\n‚úÖ Todos os seus dados ser√£o preservados\n‚úÖ Acesso imediato ap√≥s pagamento\n‚úÖ Cancele a qualquer momento\n\nVoc√™ ser√° redirecionado para o pagamento seguro.\n\nConfirma?`;
            
            if (confirm(message)) {
                // Simular ativa√ß√£o imediata para demonstra√ß√£o
                // Em produ√ß√£o, isso seria feito ap√≥s confirma√ß√£o do pagamento
                currentPlan = selectedPlan;
                trialInfo.hasSubscribed = true;
                trialInfo.isTrialActive = false;
                
                // Salvar plano ativo
                localStorage.setItem(`plan_${currentUser.email}`, JSON.stringify(currentPlan));
                localStorage.setItem(`trial_${currentUser.email}`, JSON.stringify(trialInfo));
                
                // Salvar dados pendentes para caso real
                localStorage.setItem(`pending_trial_${currentUser.email}`, JSON.stringify({
                    plan: selectedPlan,
                    timestamp: new Date().toISOString(),
                    user: currentUser,
                    businessData: businessData
                }));
                
                // Redirecionar para o pagamento
                window.open(paymentLinks[planType], '_blank');
                
                // Mostrar mensagem de sucesso e reativar acesso
                setTimeout(() => {
                    alert(`üéâ ASSINATURA ATIVADA COM SUCESSO!\n\n‚úÖ Plano ${selectedPlan.name} ativo\n‚úÖ Todos os seus dados preservados\n‚úÖ Acesso liberado imediatamente\n\nüìä SEUS DADOS:\n‚Ä¢ ${businessData.vendas?.length || 0} vendas registradas\n‚Ä¢ ${businessData.funcionarios?.length || 0} funcion√°rios cadastrados\n‚Ä¢ ${businessData.despesas?.length || 0} despesas lan√ßadas\n‚Ä¢ ${businessData.estoque?.length || 0} itens no estoque\n\nüöÄ Bem-vindo de volta ao MyBusinessNow!`);
                    
                    // Reativar acesso ao sistema
                    document.getElementById('trial-expired-screen').classList.add('hidden');
                    document.getElementById('main-app').classList.remove('hidden');
                    
                    // Carregar dados e atualizar interface
                    loadBusinessData();
                    updatePlanDisplay(currentPlan);
                    
                }, 1000);
            }
        }
        
        // Check trial status every hour for active users
        setInterval(() => {
            if (currentUser && trialInfo.isTrialActive && !trialInfo.hasSubscribed) {
                const now = new Date();
                const trialEnd = new Date(trialInfo.trialEndDate);
                
                if (now > trialEnd) {
                    // Trial expirou durante o uso - bloquear imediatamente
                    console.log('‚è∞ Trial expirou durante o uso - bloqueando acesso');
                    alert('‚è∞ SEU TESTE GRATUITO EXPIROU!\n\nPara continuar usando o MyBusinessNow, escolha um plano.\n\nTodos os seus dados est√£o seguros e ser√£o preservados ap√≥s a assinatura.');
                    showTrialExpired();
                } else {
                    updateTrialStatus();
                }
            }
        }, 3600000); // 1 hour
        
        // Check trial status every 10 minutes for more frequent updates
        setInterval(() => {
            if (currentUser && trialInfo.isTrialActive && !trialInfo.hasSubscribed) {
                const now = new Date();
                const trialEnd = new Date(trialInfo.trialEndDate);
                const hoursRemaining = Math.ceil((trialEnd.getTime() - now.getTime()) / (1000 * 60 * 60));
                
                // Avisar quando restam poucas horas
                if (hoursRemaining <= 2 && hoursRemaining > 0) {
                    const message = `‚è∞ ATEN√á√ÉO: Seu teste gratuito expira em ${hoursRemaining} hora${hoursRemaining > 1 ? 's' : ''}!\n\n‚úÖ Todos os seus dados est√£o seguros\n‚úÖ Assine um plano para continuar\n‚úÖ Acesso imediato ap√≥s assinatura\n\nN√£o perca o acesso ao seu neg√≥cio!`;
                    
                    // Mostrar apenas uma vez por sess√£o
                    if (!sessionStorage.getItem(`warning_shown_${hoursRemaining}h`)) {
                        alert(message);
                        sessionStorage.setItem(`warning_shown_${hoursRemaining}h`, 'true');
                    }
                }
            }
        }, 600000); // 10 minutes
        
        // Mobile navigation functionality
        function initializeMobileNavigation() {
            // Adicionar smooth scroll para navega√ß√£o mobile
            const mobileNavButtons = document.querySelectorAll('.mobile-nav-btn');
            mobileNavButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Scroll suave para o topo ao trocar de p√°gina no mobile
                    if (window.innerWidth <= 768) {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                });
            });
            
            // Adicionar indicador visual de scroll horizontal
            const mobileNavMenu = document.querySelector('.mobile-nav-menu');
            if (mobileNavMenu) {
                // Adicionar sombras nas bordas para indicar scroll
                mobileNavMenu.addEventListener('scroll', function() {
                    const scrollLeft = this.scrollLeft;
                    const maxScroll = this.scrollWidth - this.clientWidth;
                    
                    // Adicionar classes para indicar dire√ß√£o do scroll
                    if (scrollLeft > 0) {
                        this.classList.add('scroll-left');
                    } else {
                        this.classList.remove('scroll-left');
                    }
                    
                    if (scrollLeft < maxScroll) {
                        this.classList.add('scroll-right');
                    } else {
                        this.classList.remove('scroll-right');
                    }
                });
            }
        }
        
        // Handle window resize
        function handleResize() {
            // Reajustar elementos quando a tela muda de tamanho
            if (window.innerWidth > 768) {
                // Desktop mode - n√£o precisa fazer nada especial
            } else {
                // Mobile mode - garantir que navega√ß√£o est√° funcionando
                const mobileNavMenu = document.querySelector('.mobile-nav-menu');
                if (mobileNavMenu) {
                    // Reset scroll position se necess√°rio
                    mobileNavMenu.scrollLeft = 0;
                }
            }
        }
        
        // Mobile helper functions
        function scrollToForm(formId) {
            const form = document.getElementById(formId);
            if (form) {
                form.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // Focus no primeiro input
                const firstInput = form.querySelector('input, select, textarea');
                if (firstInput) {
                    setTimeout(() => firstInput.focus(), 300);
                }
            }
        }
        
        function addTouchFeedback() {
            // Adicionar feedback visual para toques em dispositivos m√≥veis
            document.addEventListener('touchstart', function(e) {
                if (e.target.classList.contains('btn-mobile') || 
                    e.target.classList.contains('nav-btn') ||
                    e.target.classList.contains('fab-mobile')) {
                    e.target.style.transform = 'scale(0.95)';
                    e.target.style.opacity = '0.8';
                }
            });
            
            document.addEventListener('touchend', function(e) {
                if (e.target.classList.contains('btn-mobile') || 
                    e.target.classList.contains('nav-btn') ||
                    e.target.classList.contains('fab-mobile')) {
                    setTimeout(() => {
                        e.target.style.transform = '';
                        e.target.style.opacity = '';
                    }, 150);
                }
            });
        }
        
        function optimizeForMobile() {
            // Detectar se √© dispositivo m√≥vel
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // Adicionar classe para otimiza√ß√µes mobile
                document.body.classList.add('mobile-device');
                
                // Otimizar viewport para mobile
                const viewport = document.querySelector('meta[name="viewport"]');
                if (viewport) {
                    viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                }
                
                // Prevenir zoom em inputs
                const inputs = document.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    if (!input.style.fontSize) {
                        input.style.fontSize = '16px';
                    }
                });
                
                // Adicionar smooth scrolling
                document.documentElement.style.scrollBehavior = 'smooth';
                
                // Otimizar performance
                document.body.style.webkitOverflowScrolling = 'touch';
            }
        }
        
        function handleMobileOrientation() {
            // Lidar com mudan√ßas de orienta√ß√£o
            window.addEventListener('orientationchange', function() {
                setTimeout(() => {
                    // Recalcular layouts ap√≥s mudan√ßa de orienta√ß√£o
                    if (currentPlan.name !== 'Start') {
                        handleChartResize();
                    }
                    
                    // Fechar menu mobile se estiver aberto
                    if (window.innerWidth > 768) {
                        closeMobileMenu();
                    }
                }, 100);
            });
        }
        
        function addPullToRefresh() {
            let startY = 0;
            let currentY = 0;
            let pullDistance = 0;
            const threshold = 100;
            
            document.addEventListener('touchstart', function(e) {
                if (window.scrollY === 0) {
                    startY = e.touches[0].clientY;
                }
            });
            
            document.addEventListener('touchmove', function(e) {
                if (window.scrollY === 0 && startY > 0) {
                    currentY = e.touches[0].clientY;
                    pullDistance = currentY - startY;
                    
                    if (pullDistance > 0 && pullDistance < threshold) {
                        // Mostrar indicador de pull to refresh
                        document.body.style.transform = `translateY(${pullDistance * 0.5}px)`;
                    }
                }
            });
            
            document.addEventListener('touchend', function(e) {
                if (pullDistance > threshold) {
                    // Executar refresh
                    updateDashboard();
                    generateAlerts();
                    generatePerformanceAlerts();
                    renderPerformanceCharts();
                    
                    // Mostrar feedback
                    showToast('üìä Dados atualizados!', 'success');
                }
                
                // Reset
                document.body.style.transform = '';
                startY = 0;
                pullDistance = 0;
            });
        }
        
        function showToast(message, type = 'info', duration = 3000) {
            // Remover toasts existentes para evitar ac√∫mulo
            const existingToasts = document.querySelectorAll('.toast-notification');
            existingToasts.forEach(toast => toast.remove());
            
            const toast = document.createElement('div');
            toast.className = `toast-notification fixed top-4 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 rounded-lg text-white text-sm font-medium slide-in-up shadow-lg max-w-sm text-center ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
            }`;
            
            // Adicionar √≠cone baseado no tipo
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                warning: '‚ö†Ô∏è',
                info: '‚ÑπÔ∏è'
            };
            
            toast.innerHTML = `<span class="mr-2">${icons[type] || icons.info}</span>${message}`;
            
            document.body.appendChild(toast);
            
            // Adicionar anima√ß√£o de sa√≠da
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, -100%)';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 300);
            }, duration);
        }
        
        // Sistema de notifica√ß√µes para a√ß√µes importantes
        function showSuccessNotification(title, message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 z-50 bg-white border-l-4 border-green-500 rounded-lg shadow-lg p-4 max-w-sm slide-in-right';
            notification.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <span class="text-2xl">üéâ</span>
                    </div>
                    <div class="ml-3 flex-1">
                        <h4 class="text-sm font-semibold text-gray-900">${title}</h4>
                        <p class="text-sm text-gray-600 mt-1">${message}</p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-gray-400 hover:text-gray-600">
                        <span class="text-lg">√ó</span>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remover ap√≥s 5 segundos
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
        }
        
        function addSwipeGestures() {
            let startX = 0;
            let startY = 0;
            
            document.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            });
            
            document.addEventListener('touchend', function(e) {
                const endX = e.changedTouches[0].clientX;
                const endY = e.changedTouches[0].clientY;
                const diffX = startX - endX;
                const diffY = startY - endY;
                
                // Swipe horizontal (m√≠nimo 100px, m√°ximo 50px vertical)
                if (Math.abs(diffX) > 100 && Math.abs(diffY) < 50) {
                    if (diffX > 0) {
                        // Swipe left - pr√≥xima p√°gina
                        // Implementar navega√ß√£o por swipe se necess√°rio
                    } else {
                        // Swipe right - p√°gina anterior ou abrir menu
                        if (startX < 50) { // Swipe da borda esquerda
                            const sidebar = document.getElementById('sidebar');
                            const overlay = document.getElementById('mobile-overlay');
                            if (sidebar && !sidebar.classList.contains('open')) {
                                sidebar.classList.add('open');
                                overlay.classList.add('show');
                                document.body.style.overflow = 'hidden';
                            }
                        }
                    }
                }
            });
        }

        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('üöÄ Inicializando MyBusinessNow...');
                
                // Initialize mobile optimizations
                optimizeForMobile();
                addTouchFeedback();
                handleMobileOrientation();
                addPullToRefresh();
                addSwipeGestures();
                
                // Initialize mobile navigation
                initializeMobileNavigation();
                
                // Add resize listeners
                window.addEventListener('resize', handleResize);
                window.addEventListener('resize', handleChartResize);
                
                // Initialize default page
                showPage('dashboard');
                
                // Verify all critical elements exist
                const criticalElements = [
                    'login-screen', 'main-app', 'dashboard-page', 
                    'vendas-page', 'equipe-page', 'financeiro-page',
                    'estoque-page', 'alertas-page', 'suporte-page',
                    'planos-page', 'config-page', 'cursos-page'
                ];
                
                let missingElements = [];
                criticalElements.forEach(id => {
                    if (!document.getElementById(id)) {
                        missingElements.push(id);
                        console.error(`‚ùå Elemento cr√≠tico n√£o encontrado: ${id}`);
                    }
                });
                
                if (missingElements.length === 0) {
                    console.log('‚úÖ Todos os elementos cr√≠ticos encontrados!');
                } else {
                    console.warn(`‚ö†Ô∏è ${missingElements.length} elementos n√£o encontrados:`, missingElements);
                }
                
                // Verificar se formul√°rios existem
                const forms = ['login-form', 'register-form', 'venda-form', 'employee-form', 'despesa-form', 'estoque-form'];
                forms.forEach(formId => {
                    const form = document.getElementById(formId);
                    if (form) {
                        console.log(`‚úÖ Formul√°rio ${formId} encontrado e funcional`);
                    } else {
                        console.error(`‚ùå Formul√°rio ${formId} n√£o encontrado`);
                    }
                });
                
                // Verificar localStorage
                if (typeof(Storage) !== "undefined") {
                    console.log('‚úÖ LocalStorage dispon√≠vel');
                } else {
                    console.error('‚ùå LocalStorage n√£o dispon√≠vel');
                }
                
                // Show welcome message for mobile users
                if (window.innerWidth <= 768) {
                    setTimeout(() => {
                        showToast('üì± Interface mobile otimizada!', 'success');
                    }, 1000);
                }
                
                console.log('üéâ MyBusinessNow inicializado com sucesso!');
                console.log('üìä Sistema pronto para produ√ß√£o!');
                
                // Adicionar listener para erros globais
                window.addEventListener('error', function(e) {
                    console.error('Erro global capturado:', e.error);
                    showToast('Erro detectado. Recarregue a p√°gina se necess√°rio.', 'error');
                });
                
                // Adicionar listener para erros de promise n√£o capturadas
                window.addEventListener('unhandledrejection', function(e) {
                    console.error('Promise rejeitada n√£o capturada:', e.reason);
                    e.preventDefault();
                });
                
            } catch (error) {
                console.error('‚ùå Erro cr√≠tico na inicializa√ß√£o:', error);
                alert('Erro ao inicializar aplica√ß√£o. Recarregue a p√°gina.');
            }
        });
        
        // Fallback initialization para garantir funcionamento
        if (document.readyState === 'loading') {
            console.log('‚è≥ DOM ainda carregando...');
        } else {
            console.log('‚úÖ DOM j√° carregado, inicializando p√°gina padr√£o...');
            setTimeout(() => {
                if (typeof showPage === 'function') {
                    showPage('dashboard');
                }
            }, 100);
        }
        
        // Sistema de monitoramento de performance
        window.addEventListener('load', function() {
            console.log('üìà M√©tricas de Performance:');
            console.log(`‚è±Ô∏è Tempo de carregamento: ${performance.now().toFixed(2)}ms`);
            
            // Verificar se todas as funcionalidades principais est√£o funcionando
            const functionalityTests = [
                { name: 'Login Form', test: () => document.getElementById('login-form') !== null },
                { name: 'Dashboard', test: () => document.getElementById('dashboard-page') !== null },
                { name: 'Vendas Form', test: () => document.getElementById('venda-form') !== null },
                { name: 'LocalStorage', test: () => typeof(Storage) !== "undefined" },
                { name: 'Mobile Navigation', test: () => document.querySelector('.mobile-nav-menu') !== null }
            ];
            
            console.log('üîç Teste de Funcionalidades:');
            functionalityTests.forEach(test => {
                const result = test.test();
                console.log(`${result ? '‚úÖ' : '‚ùå'} ${test.name}: ${result ? 'OK' : 'FALHOU'}`);
            });
            
            // Mostrar status final
            const allPassed = functionalityTests.every(test => test.test());
            if (allPassed) {
                console.log('üéâ SISTEMA 100% FUNCIONAL - PRONTO PARA PRODU√á√ÉO!');
            } else {
                console.warn('‚ö†Ô∏è Alguns testes falharam - verificar funcionalidades');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96fbc804063ae29a',t:'MTc1NTI5MzMwMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
